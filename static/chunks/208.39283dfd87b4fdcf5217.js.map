{"version":3,"sources":["webpack://_N_E/./modules/editor/data/validation/first.ts","webpack://_N_E/./modules/editor/data/validation/isArray.ts","webpack://_N_E/./modules/editor/data/validation/contains.ts","webpack://_N_E/./modules/editor/data/validation/isNumber.ts","webpack://_N_E/./modules/editor/data/validation/isObject.ts","webpack://_N_E/./modules/editor/data/validation/isShape.ts","webpack://_N_E/./modules/editor/data/validation/isString.ts","webpack://_N_E/./modules/editor/data/validation/isUrl.ts","webpack://_N_E/./modules/editor/data/validation/length.ts","webpack://_N_E/./modules/editor/data/validation/minLength.ts","webpack://_N_E/./modules/editor/data/validation/maxLength.ts","webpack://_N_E/./modules/editor/data/validation/noExcessiveKeys.ts","webpack://_N_E/./modules/editor/data/validation/optional.ts","webpack://_N_E/./modules/editor/data/validation/requiresKey.ts","webpack://_N_E/./modules/editor/data/validation/isAuthor.ts","webpack://_N_E/./modules/editor/data/validation/isDate.ts","webpack://_N_E/./modules/editor/data/validation/isField.ts","webpack://_N_E/./modules/editor/data/validation/requiresKeys.ts","webpack://_N_E/./modules/editor/data/validation/all.ts","webpack://_N_E/./modules/editor/data/validation/isBoolean.ts","webpack://_N_E/./modules/editor/data/validation/isFooter.ts","webpack://_N_E/./modules/editor/data/validation/nullable.ts","webpack://_N_E/./modules/editor/data/validation/isEmbed.ts","webpack://_N_E/./modules/editor/data/validation/between.ts","webpack://_N_E/./modules/editor/data/validation/isMessage.ts","webpack://_N_E/./modules/editor/data/DataEditorModal.tsx","webpack://_N_E/./common/object/parseJson.ts","webpack://_N_E/./modules/message/helpers/messageOf.ts"],"names":["first","validators","value","key","reduce","results","validate","some","result","isArray","Array","contains","flatMap","item","index","isNumber","isObject","Date","isShape","shape","Object","entries","shapeKey","prototype","hasOwnProperty","call","isString","isUrl","test","length","min","max","trim","maxLength","noExcessiveKeys","keys","filter","includes","map","excessiveKey","JSON","stringify","optional","undefined","requiresKey","requiredKey","join","isAuthor","name","url","icon_url","isDate","isField","all","requiresKeys","inline","isFooter","text","nullable","isEmbed","title","description","timestamp","color","footer","image","thumbnail","author","fields","isMessage","content","embeds","username","avatar_url","Container","styled","ModalContainer","Body","ModalBody","CodeInput","Input","theme","font","mono","ErrorContainer","div","ErrorLine","code","accent","danger","DataEditorModal","props","message","modal","useRequiredContext","ModalContext","setValue","useState","stringifyMessage","data","error","json","parse","replace","parseJson","errors","useObserver","ModalHeader","ModalTitle","ModalAction","icon","remove","label","onClick","dismiss","as","id","onChange","event","target","ModalFooter","SecondaryButton","copyTextToClipboard","PrimaryButton","disabled","applySnapshot","messageOf","snapshot","avatar","embedData","embed","gallery","push","authorUrl","authorIcon","footerIcon","Number","NaN","Boolean","ColorModel","create","setRaw","fieldData","field"],"mappings":"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","file":"static/chunks/208.39283dfd87b4fdcf5217.js","sourcesContent":["import type { Validator } from \"./Validator\"\n\nexport const first = (...validators: Validator[]): Validator => (value, key) =>\n  validators.reduce<string[]>(\n    (results, validate) =>\n      results.some(result => typeof result === \"string\")\n        ? results\n        : validate(value, key),\n    [],\n  )\n","import type { Validator } from \"./Validator\"\n\nexport const isArray: Validator = (value, key) =>\n  Array.isArray(value) ? [] : [`${key}: Must be array`]\n","import { first } from \"./first\"\nimport { isArray } from \"./isArray\"\nimport type { Validator } from \"./Validator\"\n\nexport const contains = (validate: Validator): Validator =>\n  first(isArray, (value, key) =>\n    (value as unknown[]).flatMap((item, index) =>\n      validate(item, `${key}[${index}]`),\n    ),\n  )\n","import type { Validator } from \"./Validator\"\n\nexport const isNumber: Validator = (value, key) =>\n  typeof value === \"number\" ? [] : [`${key}: Must be number`]\n","import type { Validator } from \"./Validator\"\n\nexport const isObject: Validator = (value, key) =>\n  typeof value === \"object\" &&\n  value !== null &&\n  !Array.isArray(value) &&\n  !(value instanceof Date)\n    ? []\n    : [`${key}: Must be object`]\n","import { first } from \"./first\"\nimport { isObject } from \"./isObject\"\nimport type { Validator } from \"./Validator\"\n\nexport const isShape = (shape: Record<string, Validator>): Validator =>\n  first(isObject, (value, key) =>\n    Object.entries(shape).flatMap(([shapeKey, validate]) =>\n      Object.prototype.hasOwnProperty.call(value, shapeKey)\n        ? validate(\n            (value as Record<string, unknown>)[shapeKey],\n            `${key}.${shapeKey}`,\n          )\n        : [],\n    ),\n  )\n","import type { Validator } from \"./Validator\"\n\nexport const isString: Validator = (value, key) =>\n  typeof value === \"string\" ? [] : [`${key}: Must be string`]\n","import { first } from \"./first\"\nimport { isString } from \"./isString\"\nimport type { Validator } from \"./Validator\"\n\nexport const isUrl: Validator = first(isString, (value, key) =>\n  /^https?:\\/\\//.test(value as string) ? [] : [`${key}: Must be URL`],\n)\n","import { first } from \"./first\"\nimport { maxLength } from \"./maxLength\"\nimport { minLength } from \"./minLength\"\nimport type { Validator } from \"./Validator\"\n\nexport const length = (min: number, max: number): Validator =>\n  first(minLength(min), maxLength(max))\n","import type { Validator } from \"./Validator\"\n\nexport const minLength = (length: number): Validator => (value, key) =>\n  typeof value === \"string\" && value.trim().length < length\n    ? [`${key}: Must be at least ${length} character long`]\n    : Array.isArray(value) && value.length < length\n    ? [`${key}: Must contain at least ${length} value`]\n    : []\n","import type { Validator } from \"./Validator\"\n\nexport const maxLength = (length: number): Validator => (value, key) =>\n  typeof value === \"string\" && value.trim().length > length\n    ? [`${key}: Must be at most ${length} long`]\n    : Array.isArray(value) && value.length > length\n    ? [`${key}: Must contain at most ${length} values`]\n    : []\n","import { first } from \"./first\"\nimport { isObject } from \"./isObject\"\nimport type { Validator } from \"./Validator\"\n\nexport const noExcessiveKeys = (...keys: string[]): Validator =>\n  first(isObject, (value, key) =>\n    Object.keys(value as Record<string, unknown>)\n      .filter(key => !keys.includes(key))\n      .map(\n        excessiveKey => `${key}: Excessive key ${JSON.stringify(excessiveKey)}`,\n      ),\n  )\n","import type { Validator } from \"./Validator\"\n\nexport const optional = (validate: Validator): Validator => (value, key) =>\n  value === undefined ? [] : validate(value, key)\n","import { first } from \"./first\"\nimport { isObject } from \"./isObject\"\nimport type { Validator } from \"./Validator\"\n\nexport const requiresKey = (...keys: string[]): Validator =>\n  first(isObject, (value, key) =>\n    keys\n      .map(requiredKey =>\n        Object.prototype.hasOwnProperty.call(\n          value as Record<string, unknown>,\n          requiredKey,\n        ),\n      )\n      .some(result => result)\n      ? []\n      : keys.length === 1\n      ? [`${key}: Expected key ${JSON.stringify(keys[0])}`]\n      : [\n          `${key}: Expected one of following keys: ${keys\n            .map(key => JSON.stringify(key))\n            .join(\", \")}`,\n        ],\n  )\n","import { first } from \"./first\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { isUrl } from \"./isUrl\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { optional } from \"./optional\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const isAuthor: Validator = first(\n  noExcessiveKeys(\"name\", \"url\", \"icon_url\"),\n  requiresKey(\"name\"),\n  isShape({\n    name: first(isString, length(1, 256)),\n    url: optional(isUrl),\n    icon_url: optional(isUrl),\n  }),\n)\n","import { first } from \"./first\"\nimport { isString } from \"./isString\"\nimport type { Validator } from \"./Validator\"\n\nexport const isDate: Validator = first(isString, (value, key) =>\n  /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}?Z$/.test(value as string)\n    ? []\n    : [`${key}: Must be date in ISO 8601 format`],\n)\n","import { first } from \"./first\"\nimport { isBoolean } from \"./isBoolean\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { optional } from \"./optional\"\nimport { requiresKeys } from \"./requiresKeys\"\nimport type { Validator } from \"./Validator\"\n\nexport const isField: Validator = first(\n  noExcessiveKeys(\"name\", \"value\", \"inline\"),\n  requiresKeys(\"name\", \"value\"),\n  isShape({\n    name: first(isString, length(1, 256)),\n    value: first(isString, length(1, 1024)),\n    inline: optional(isBoolean),\n  }),\n)\n","import { all } from \"./all\"\nimport { first } from \"./first\"\nimport { isObject } from \"./isObject\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const requiresKeys = (...keys: string[]): Validator =>\n  first(isObject, all(...keys.map(key => requiresKey(key))))\n","import type { Validator } from \"./Validator\"\n\nexport const all = (...validators: Validator[]): Validator => (value, key) =>\n  validators.flatMap(validate => validate(value, key))\n","import type { Validator } from \"./Validator\"\n\nexport const isBoolean: Validator = (value, key) =>\n  typeof value === \"boolean\" ? [] : [`${key}: Must be boolean`]\n","import { first } from \"./first\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { isUrl } from \"./isUrl\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { optional } from \"./optional\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const isFooter: Validator = first(\n  requiresKey(\"text\"),\n  noExcessiveKeys(\"text\", \"icon_url\"),\n  isShape({\n    text: first(isString, length(1, 2048)),\n    icon_url: optional(isUrl),\n  }),\n)\n","import type { Validator } from \"./Validator\"\n\nexport const nullable = (validate: Validator): Validator => (value, key) =>\n  value === null ? [] : validate(value, key)\n","import { between } from \"./between\"\nimport { contains } from \"./contains\"\nimport { first } from \"./first\"\nimport { isAuthor } from \"./isAuthor\"\nimport { isDate } from \"./isDate\"\nimport { isField } from \"./isField\"\nimport { isFooter } from \"./isFooter\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { isUrl } from \"./isUrl\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { nullable } from \"./nullable\"\nimport { optional } from \"./optional\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const isEmbed: Validator = first(\n  noExcessiveKeys(\n    \"title\",\n    \"description\",\n    \"url\",\n    \"timestamp\",\n    \"color\",\n    \"footer\",\n    \"image\",\n    \"thumbnail\",\n    \"author\",\n    \"fields\",\n  ),\n  requiresKey(\n    \"title\",\n    \"description\",\n    \"url\",\n    \"timestamp\",\n    \"color\",\n    \"footer\",\n    \"image\",\n    \"thumbnail\",\n    \"author\",\n    \"fields\",\n  ),\n  isShape({\n    title: optional(first(isString, length(1, 256))),\n    description: optional(first(isString, length(1, 4096))),\n    url: optional(isUrl),\n    timestamp: optional(isDate),\n    color: optional(nullable(between(0, 0xffffff))),\n    footer: optional(isFooter),\n    image: optional(\n      first(\n        noExcessiveKeys(\"url\"),\n        requiresKey(\"url\"),\n        isShape({ url: isUrl }),\n      ),\n    ),\n    thumbnail: optional(\n      first(\n        noExcessiveKeys(\"url\"),\n        requiresKey(\"url\"),\n        isShape({ url: isUrl }),\n      ),\n    ),\n    author: optional(isAuthor),\n    fields: optional(first(contains(isField), length(1, 25))),\n  }),\n)\n","import { first } from \"./first\"\nimport { isNumber } from \"./isNumber\"\nimport type { Validator } from \"./Validator\"\n\nexport const between = (min: number, max: number): Validator =>\n  first(isNumber, (value, key) =>\n    min > (value as number) || max < (value as number)\n      ? [`${key}: Must be between ${min} and ${max} inclusive`]\n      : [],\n  )\n","import { contains } from \"./contains\"\nimport { first } from \"./first\"\nimport { isEmbed } from \"./isEmbed\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { isUrl } from \"./isUrl\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { nullable } from \"./nullable\"\nimport { optional } from \"./optional\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const isMessage: Validator = first(\n  noExcessiveKeys(\"content\", \"embeds\", \"username\", \"avatar_url\"),\n  requiresKey(\"content\", \"embeds\"),\n  isShape({\n    content: optional(nullable(first(isString, length(1, 2000)))),\n    embeds: optional(nullable(first(contains(isEmbed), length(1, 10)))),\n    username: optional(first(isString, length(1, 256))),\n    avatar_url: optional(isUrl),\n  }),\n)\n","import { useObserver } from \"mobx-react-lite\"\nimport { applySnapshot } from \"mobx-state-tree\"\nimport React, { ChangeEvent, useState } from \"react\"\nimport styled from \"styled-components\"\nimport { copyTextToClipboard } from \"../../../common/dom/copyTextToClipboard\"\nimport { PrimaryButton } from \"../../../common/input/button/PrimaryButton\"\nimport { SecondaryButton } from \"../../../common/input/button/SecondaryButton\"\nimport { Input } from \"../../../common/input/layout/Input\"\nimport { ModalAction } from \"../../../common/modal/layout/ModalAction\"\nimport { ModalBody } from \"../../../common/modal/layout/ModalBody\"\nimport { ModalContainer } from \"../../../common/modal/layout/ModalContainer\"\nimport { ModalFooter } from \"../../../common/modal/layout/ModalFooter\"\nimport { ModalHeader } from \"../../../common/modal/layout/ModalHeader\"\nimport { ModalTitle } from \"../../../common/modal/layout/ModalTitle\"\nimport { ModalContext } from \"../../../common/modal/ModalContext\"\nimport { parseJson } from \"../../../common/object/parseJson\"\nimport { useRequiredContext } from \"../../../common/state/useRequiredContext\"\nimport { remove } from \"../../../icons/remove\"\nimport { messageOf } from \"../../message/helpers/messageOf\"\nimport { stringifyMessage } from \"../../message/helpers/stringifyMessage\"\nimport type { MessageLike } from \"../../message/state/models/MessageModel\"\nimport { isMessage } from \"./validation/isMessage\"\n\nconst Container = styled(ModalContainer)`\n  width: 1024px;\n  height: 768px;\n\n  display: flex;\n  flex-flow: column;\n`\n\nconst Body = styled(ModalBody)`\n  flex: 1;\n\n  display: flex;\n  flex-flow: column;\n`\n\nconst CodeInput = styled(Input)`\n  && {\n    width: 100%;\n    resize: none;\n  }\n\n  flex: 1;\n\n  font-family: ${({ theme }) => theme.font.mono};\n  font-size: 14px;\n  line-height: 1.375;\n\n  overflow-y: auto;\n`\n\nconst ErrorContainer = styled.div`\n  margin-top: 8px;\n\n  max-height: max(20%, 96px);\n  overflow-y: auto;\n`\n\nconst ErrorLine = styled.code`\n  display: block;\n\n  color: ${({ theme }) => theme.accent.danger};\n  font-size: 14px;\n  line-height: 1.375;\n\n  & + & {\n    margin-top: 8px;\n  }\n`\n\nexport type DataEditorModalProps = {\n  message: MessageLike\n}\n\nexport function DataEditorModal(props: DataEditorModalProps) {\n  const { message } = props\n\n  const modal = useRequiredContext(ModalContext)\n\n  const [value, setValue] = useState(() => stringifyMessage(message.data))\n\n  const { value: data, error } = parseJson(value)\n  const errors = error ? [error] : isMessage(data, \"$\")\n\n  return useObserver(() => (\n    <Container>\n      <ModalHeader>\n        <ModalTitle>JSON Editor</ModalTitle>\n        <ModalAction\n          icon={remove}\n          label=\"Close\"\n          onClick={() => modal.dismiss()}\n        />\n      </ModalHeader>\n      <Body>\n        <CodeInput\n          as=\"textarea\"\n          id=\"data-editor\"\n          value={value}\n          onChange={(event: ChangeEvent<HTMLTextAreaElement>) => {\n            setValue(event.target.value)\n          }}\n        />\n        {errors.length > 0 && (\n          <ErrorContainer>\n            {errors.map((error, index) => (\n              // eslint-disable-next-line react/no-array-index-key\n              <ErrorLine key={index}>{error}</ErrorLine>\n            ))}\n          </ErrorContainer>\n        )}\n      </Body>\n      <ModalFooter>\n        <SecondaryButton onClick={() => copyTextToClipboard(value)}>\n          Copy to Clipboard\n        </SecondaryButton>\n        <SecondaryButton onClick={() => modal.dismiss()}>\n          Cancel\n        </SecondaryButton>\n        <PrimaryButton\n          disabled={errors.length > 0}\n          onClick={() => {\n            applySnapshot(message, {\n              ...messageOf(JSON.parse(value)),\n              id: message.id,\n            })\n            modal.dismiss()\n          }}\n        >\n          Apply Changes\n        </PrimaryButton>\n      </ModalFooter>\n    </Container>\n  ))\n}\n","import type { JsonType } from \"./JsonType\"\n\nexport const parseJson = (json: string) => {\n  try {\n    return { value: JSON.parse(json) as JsonType }\n  } catch (error) {\n    const message = error.message.replace(/^JSON\\.parse: /, \"\")\n    return { error: message as string }\n  }\n}\n","import type { SnapshotIn } from \"mobx-state-tree\"\nimport { ColorModel } from \"../../../common/input/color/ColorModel\"\nimport type { MessageData } from \"../state/data/MessageData\"\nimport type { MessageModel } from \"../state/models/MessageModel\"\n\nexport const messageOf = (data: MessageData) => {\n  const snapshot: Record<string, unknown> = {}\n\n  snapshot.content = data.content ?? \"\"\n  snapshot.username = data.username ?? \"\"\n  snapshot.avatar = data.avatar_url ?? \"\"\n\n  const embeds: Record<string, unknown>[] = []\n  snapshot.embeds = embeds\n\n  for (const embedData of data.embeds ?? []) {\n    let embed = embeds.length > 0 ? embeds[embeds.length - 1] : undefined\n\n    if (embed?.url && embed.url === embedData.url) {\n      const gallery = embed.gallery as string[]\n      if (embedData.image?.url && gallery.length < 4) {\n        gallery.push(embedData.image.url)\n      }\n\n      continue\n    }\n\n    embed = {}\n    embeds.push(embed)\n\n    embed.title = embedData.title ?? \"\"\n    embed.description = embedData.description ?? \"\"\n    embed.url = embedData.url ?? \"\"\n    embed.author = embedData.author?.name ?? \"\"\n    embed.authorUrl = embedData.author?.url ?? \"\"\n    embed.authorIcon = embedData.author?.icon_url ?? \"\"\n    embed.footer = embedData.footer?.text ?? \"\"\n    embed.footerIcon = embedData.footer?.icon_url ?? \"\"\n    embed.timestamp = new Date(embedData.timestamp ?? Number.NaN)\n    embed.gallery = [embedData.image?.url ?? \"\"].filter(Boolean)\n    embed.thumbnail = embedData.thumbnail?.url ?? \"\"\n\n    const color = ColorModel.create()\n    color.setRaw(embedData.color ?? null)\n    embed.color = color\n\n    const fields: Record<string, unknown>[] = []\n    embed.fields = fields\n\n    for (const fieldData of embedData.fields ?? []) {\n      const field: Record<string, unknown> = {}\n      fields.push(field)\n\n      field.name = fieldData.name ?? \"\"\n      field.value = fieldData.value ?? \"\"\n      field.inline = fieldData.inline ?? false\n    }\n  }\n\n  return snapshot as SnapshotIn<typeof MessageModel>\n}\n"],"sourceRoot":""}