{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Observer, useObserver } from \"mobx-react-lite\";\nimport dynamic from \"next/dynamic\";\nimport { rem } from \"polished\";\nimport React from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { SCREEN_SMALL } from \"../../../common/layout/breakpoints\";\nimport { getTextDirection } from \"../../markdown/helpers/getTextDirection\";\nimport { Markdown } from \"../../markdown/Markdown\";\nimport { MarkdownContainer } from \"../../markdown/styles/MarkdownContainer\";\nimport { MessageHeader } from \"./MessageHeader\";\nimport { RichEmbed } from \"./RichEmbed\";\nconst Attachment = dynamic(async () => import(\"./attachment/Attachment\").then(module => module.Attachment), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"./attachment/Attachment\")],\n    modules: [\"./attachment/Attachment\"]\n  }\n});\nconst Container = styled.div.withConfig({\n  componentId: \"kn3fae-0\"\n})([\"margin-top:\", \";\", \";\", \";\"], rem(16), ({\n  theme\n}) => theme.appearance.display === \"cozy\" && css([\"padding:\", \" 16px \", \" \", \";min-height:\", \";\", \";\", \"{padding-left:16px;}\"], rem(2), rem(2), rem(72), rem(44), ({\n  theme\n}) => theme.appearance.fontSize > 16 && css([\"padding-left:72px;\"]), SCREEN_SMALL), ({\n  theme\n}) => theme.appearance.display === \"compact\" && css([\"padding:\", \" \", \" \", \" 80px;min-height:\", \";text-indent:calc(\", \" - 80px);& > \", \"{text-indent:0;display:inline;}\"], rem(2), rem(16), rem(2), rem(22), rem(16), MarkdownContainer));\nconst Content = styled(Markdown).withConfig({\n  componentId: \"kn3fae-1\"\n})([\"\", \"\"], ({\n  theme,\n  direction\n}) => theme.appearance.display === \"cozy\" && direction === \"rtl\" && css([\"& > \", \"{text-indent:0;text-align:left;unicode-bidi:plaintext;}\"], MarkdownContainer));\nconst ExtrasContainer = styled.div.withConfig({\n  componentId: \"kn3fae-2\"\n})([\"display:grid;grid-auto-flow:row;row-gap:\", \";padding:\", \" 0;text-indent:0;& > *{justify-self:start;align-self:start;}\"], rem(4), rem(2));\nexport function MessagePreview(props) {\n  const {\n    message\n  } = props;\n  return useObserver(() => /*#__PURE__*/_jsxs(Container, {\n    children: [/*#__PURE__*/_jsx(MessageHeader, {\n      username: message.username,\n      avatarUrl: message.avatar,\n      timestamp: message.timestamp,\n      badge: message.badge\n    }), message.hasContent && /*#__PURE__*/_jsx(Observer, {\n      children: () => /*#__PURE__*/_jsx(Content, {\n        direction: getTextDirection(message.content),\n        content: message.content,\n        type: \"message-content\"\n      })\n    }), message.hasExtras && /*#__PURE__*/_jsx(ExtrasContainer, {\n      children: [...message.files.map(file => /*#__PURE__*/_jsx(Attachment, {\n        file: file\n      }, `Attachment ${JSON.stringify(file.name)}`)), ...message.embeds.map(embed => /*#__PURE__*/_jsx(RichEmbed, {\n        embed: embed\n      }, `Embed ${embed.id}`))]\n    })]\n  }));\n}","map":{"version":3,"sources":["/home/runner/work/site/site/modules/message/preview/MessagePreview.tsx"],"names":["Observer","useObserver","dynamic","rem","React","styled","css","SCREEN_SMALL","getTextDirection","Markdown","MarkdownContainer","MessageHeader","RichEmbed","Attachment","then","module","Container","div","theme","appearance","display","fontSize","Content","direction","ExtrasContainer","MessagePreview","props","message","username","avatar","timestamp","badge","hasContent","content","hasExtras","files","map","file","JSON","stringify","name","embeds","embed","id"],"mappings":"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","sourcesContent":["import { Observer, useObserver } from \"mobx-react-lite\"\nimport dynamic from \"next/dynamic\"\nimport { rem } from \"polished\"\nimport React from \"react\"\nimport styled, { css } from \"styled-components\"\nimport { SCREEN_SMALL } from \"../../../common/layout/breakpoints\"\nimport { getTextDirection } from \"../../markdown/helpers/getTextDirection\"\nimport { Markdown } from \"../../markdown/Markdown\"\nimport { MarkdownContainer } from \"../../markdown/styles/MarkdownContainer\"\nimport type { MessageLike } from \"../state/models/MessageModel\"\nimport type { AttachmentProps } from \"./attachment/Attachment\"\nimport { MessageHeader } from \"./MessageHeader\"\nimport { RichEmbed } from \"./RichEmbed\"\n\nconst Attachment = dynamic<AttachmentProps>(async () =>\n  import(\"./attachment/Attachment\").then(module => module.Attachment),\n)\n\nconst Container = styled.div`\n  margin-top: ${rem(16)};\n\n  ${({ theme }) =>\n    theme.appearance.display === \"cozy\" &&\n    css`\n      padding: ${rem(2)} 16px ${rem(2)} ${rem(72)};\n\n      min-height: ${rem(44)};\n\n      ${({ theme }) =>\n        theme.appearance.fontSize > 16 &&\n        css`\n          padding-left: 72px;\n        `};\n\n      ${SCREEN_SMALL} {\n        padding-left: 16px;\n      }\n    `};\n\n  ${({ theme }) =>\n    theme.appearance.display === \"compact\" &&\n    css`\n      padding: ${rem(2)} ${rem(16)} ${rem(2)} 80px;\n\n      min-height: ${rem(22)};\n\n      text-indent: calc(${rem(16)} - 80px);\n\n      & > ${MarkdownContainer} {\n        text-indent: 0;\n        display: inline;\n      }\n    `};\n`\n\nconst Content = styled(Markdown)<{ direction: \"neutral\" | \"ltr\" | \"rtl\" }>`\n  ${({ theme, direction }) =>\n    theme.appearance.display === \"cozy\" &&\n    direction === \"rtl\" &&\n    css`\n      & > ${MarkdownContainer} {\n        text-indent: 0;\n        text-align: left;\n        unicode-bidi: plaintext;\n      }\n    `}\n`\n\nconst ExtrasContainer = styled.div`\n  display: grid;\n  grid-auto-flow: row;\n  row-gap: ${rem(4)};\n\n  padding: ${rem(2)} 0;\n\n  text-indent: 0;\n\n  & > * {\n    justify-self: start;\n    align-self: start;\n  }\n`\n\nexport type MessagePreviewProps = {\n  message: MessageLike\n}\n\nexport function MessagePreview(props: MessagePreviewProps) {\n  const { message } = props\n\n  return useObserver(() => (\n    <Container>\n      <MessageHeader\n        username={message.username}\n        avatarUrl={message.avatar}\n        timestamp={message.timestamp}\n        badge={message.badge}\n      />\n      {message.hasContent && (\n        <Observer>\n          {() => (\n            <Content\n              direction={getTextDirection(message.content)}\n              content={message.content}\n              type=\"message-content\"\n            />\n          )}\n        </Observer>\n      )}\n      {message.hasExtras && (\n        <ExtrasContainer>\n          {[\n            ...message.files.map(file => (\n              <Attachment\n                key={`Attachment ${JSON.stringify(file.name)}`}\n                file={file}\n              />\n            )),\n            ...message.embeds.map(embed => (\n              <RichEmbed key={`Embed ${embed.id}`} embed={embed} />\n            )),\n          ]}\n        </ExtrasContainer>\n      )}\n    </Container>\n  ))\n}\n"]},"metadata":{},"sourceType":"module"}