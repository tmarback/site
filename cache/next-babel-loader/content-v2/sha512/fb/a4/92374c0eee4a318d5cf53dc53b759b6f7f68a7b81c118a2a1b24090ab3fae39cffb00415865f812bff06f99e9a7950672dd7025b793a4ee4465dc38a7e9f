{"ast":null,"code":"import { useEffect } from \"react\";\n\nconst clamp = (number, ...range) => Math.max(Math.min(number, Math.max(...range)), Math.min(...range));\n\nexport const useDragArea = (ref, fn) => {\n  useEffect(() => {\n    const {\n      current: element\n    } = ref;\n    if (!element) return;\n\n    const handleDrag = event => {\n      const {\n        left,\n        top,\n        width,\n        height\n      } = element.getBoundingClientRect();\n      const x = clamp((event.clientX - left) / width, 0, 1);\n      const y = clamp((event.clientY - top) / height, 0, 1);\n      fn(x, y);\n    };\n\n    const handleDragStart = event => {\n      event.preventDefault();\n      handleDrag(event);\n\n      const handleDragEnd = () => {\n        removeEventListener(\"mouseup\", handleDragEnd);\n        removeEventListener(\"mousemove\", handleDrag);\n      };\n\n      addEventListener(\"mousemove\", handleDrag);\n      addEventListener(\"mouseup\", handleDragEnd);\n    };\n\n    element.addEventListener(\"mousedown\", handleDragStart);\n    return () => element.removeEventListener(\"mousedown\", handleDragStart);\n  }, [fn, ref]);\n};","map":null,"metadata":{},"sourceType":"module"}