{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { isValid } from \"date-fns\";\nimport { rem } from \"polished\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport styled, { css, useTheme } from \"styled-components\";\nimport { formatTimestamp } from \"./formatTimestamp\";\nconst Display = styled.span.withConfig({\n  componentId: \"sc-1idsap7-0\"\n})([\"display:inline-block;height:\", \";cursor:default;color:\", \";\", \";\", \";\"], rem(20), ({\n  theme\n}) => theme.text.muted, ({\n  theme\n}) => theme.appearance.display === \"cozy\" && css([\"margin-left:\", \";font-size:\", \";font-weight:500;line-height:\", \";vertical-align:baseline;\"], rem(4), rem(12), rem(22)), ({\n  theme\n}) => theme.appearance.display === \"compact\" && css([\"width:\", \";margin-right:\", \";font-size:\", \";line-height:\", \";text-align:right;text-indent:0;\"], rem(48), rem(8), rem(11), rem(22)));\nexport function Clock(props) {\n  let {\n    timestamp\n  } = props;\n  if (timestamp && !isValid(timestamp)) timestamp = undefined;\n  const theme = useTheme();\n  const format = useCallback((timestamp = new Date()) => {\n    if (theme.appearance.display === \"compact\") {\n      return timestamp.toLocaleString(\"en-US\", {\n        hour: \"numeric\",\n        minute: \"numeric\",\n        hour12: true\n      });\n    }\n\n    return formatTimestamp(timestamp);\n  }, [theme.appearance.display]);\n  const {\n    0: displayedTime,\n    1: setDisplayedTime\n  } = useState(() => format(timestamp));\n  useEffect(() => {\n    if (!timestamp) {\n      const interval = setInterval(() => setDisplayedTime(format()), 1000);\n      return () => clearInterval(interval);\n    }\n\n    setDisplayedTime(format(timestamp));\n  }, [format, timestamp]);\n  return /*#__PURE__*/_jsx(Display, {\n    children: displayedTime\n  });\n}","map":{"version":3,"sources":["/home/runner/work/site/site/modules/message/preview/Clock.tsx"],"names":["isValid","rem","React","useCallback","useEffect","useState","styled","css","useTheme","formatTimestamp","Display","span","theme","text","muted","appearance","display","Clock","props","timestamp","undefined","format","Date","toLocaleString","hour","minute","hour12","displayedTime","setDisplayedTime","interval","setInterval","clearInterval"],"mappings":";AAAA,SAASA,OAAT,QAAwB,UAAxB;AACA,SAASC,GAAT,QAAoB,UAApB;AACA,OAAOC,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,QAAxC,QAAwD,OAAxD;AACA,OAAOC,MAAP,IAAiBC,GAAjB,EAAsBC,QAAtB,QAAsC,mBAAtC;AACA,SAASC,eAAT,QAAgC,mBAAhC;AAEA,MAAMC,OAAO,GAAGJ,MAAM,CAACK,IAAV;AAAA;AAAA,8EAEDV,GAAG,CAAC,EAAD,CAFF,EAKF,CAAC;AAAEW,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACC,IAAN,CAAWC,KALxB,EAOT,CAAC;AAAEF,EAAAA;AAAF,CAAD,KACAA,KAAK,CAACG,UAAN,CAAiBC,OAAjB,KAA6B,MAA7B,IACAT,GADA,gGAEiBN,GAAG,CAAC,CAAD,CAFpB,EAIeA,GAAG,CAAC,EAAD,CAJlB,EAMiBA,GAAG,CAAC,EAAD,CANpB,CARS,EAkBT,CAAC;AAAEW,EAAAA;AAAF,CAAD,KACAA,KAAK,CAACG,UAAN,CAAiBC,OAAjB,KAA6B,SAA7B,IACAT,GADA,mGAEWN,GAAG,CAAC,EAAD,CAFd,EAGkBA,GAAG,CAAC,CAAD,CAHrB,EAKeA,GAAG,CAAC,EAAD,CALlB,EAMiBA,GAAG,CAAC,EAAD,CANpB,CAnBS,CAAb;AAmCA,OAAO,SAASgB,KAAT,CAAeC,KAAf,EAAkC;AACvC,MAAI;AAAEC,IAAAA;AAAF,MAAgBD,KAApB;AACA,MAAIC,SAAS,IAAI,CAACnB,OAAO,CAACmB,SAAD,CAAzB,EAAsCA,SAAS,GAAGC,SAAZ;AAEtC,QAAMR,KAAK,GAAGJ,QAAQ,EAAtB;AAEA,QAAMa,MAAM,GAAGlB,WAAW,CACxB,CAACgB,SAAe,GAAG,IAAIG,IAAJ,EAAnB,KAAkC;AAChC,QAAIV,KAAK,CAACG,UAAN,CAAiBC,OAAjB,KAA6B,SAAjC,EAA4C;AAC1C,aAAOG,SAAS,CAACI,cAAV,CAAyB,OAAzB,EAAkC;AACvCC,QAAAA,IAAI,EAAE,SADiC;AAEvCC,QAAAA,MAAM,EAAE,SAF+B;AAGvCC,QAAAA,MAAM,EAAE;AAH+B,OAAlC,CAAP;AAKD;;AAED,WAAOjB,eAAe,CAACU,SAAD,CAAtB;AACD,GAXuB,EAYxB,CAACP,KAAK,CAACG,UAAN,CAAiBC,OAAlB,CAZwB,CAA1B;AAeA,QAAM;AAAA,OAACW,aAAD;AAAA,OAAgBC;AAAhB,MAAoCvB,QAAQ,CAAC,MAAMgB,MAAM,CAACF,SAAD,CAAb,CAAlD;AAEAf,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACe,SAAL,EAAgB;AACd,YAAMU,QAAQ,GAAGC,WAAW,CAAC,MAAMF,gBAAgB,CAACP,MAAM,EAAP,CAAvB,EAAmC,IAAnC,CAA5B;AACA,aAAO,MAAMU,aAAa,CAACF,QAAD,CAA1B;AACD;;AAEDD,IAAAA,gBAAgB,CAACP,MAAM,CAACF,SAAD,CAAP,CAAhB;AACD,GAPQ,EAON,CAACE,MAAD,EAASF,SAAT,CAPM,CAAT;AASA,sBAAO,KAAC,OAAD;AAAA,cAAUQ;AAAV,IAAP;AACD","sourcesContent":["import { isValid } from \"date-fns\"\nimport { rem } from \"polished\"\nimport React, { useCallback, useEffect, useState } from \"react\"\nimport styled, { css, useTheme } from \"styled-components\"\nimport { formatTimestamp } from \"./formatTimestamp\"\n\nconst Display = styled.span`\n  display: inline-block;\n  height: ${rem(20)};\n  cursor: default;\n\n  color: ${({ theme }) => theme.text.muted};\n\n  ${({ theme }) =>\n    theme.appearance.display === \"cozy\" &&\n    css`\n      margin-left: ${rem(4)};\n\n      font-size: ${rem(12)};\n      font-weight: 500;\n      line-height: ${rem(22)};\n      vertical-align: baseline;\n    `};\n\n  ${({ theme }) =>\n    theme.appearance.display === \"compact\" &&\n    css`\n      width: ${rem(48)};\n      margin-right: ${rem(8)};\n\n      font-size: ${rem(11)};\n      line-height: ${rem(22)};\n      text-align: right;\n      text-indent: 0;\n    `};\n`\n\nexport type ClockProps = {\n  timestamp?: Date\n}\n\nexport function Clock(props: ClockProps) {\n  let { timestamp } = props\n  if (timestamp && !isValid(timestamp)) timestamp = undefined\n\n  const theme = useTheme()\n\n  const format = useCallback(\n    (timestamp: Date = new Date()) => {\n      if (theme.appearance.display === \"compact\") {\n        return timestamp.toLocaleString(\"en-US\", {\n          hour: \"numeric\",\n          minute: \"numeric\",\n          hour12: true,\n        })\n      }\n\n      return formatTimestamp(timestamp)\n    },\n    [theme.appearance.display],\n  )\n\n  const [displayedTime, setDisplayedTime] = useState(() => format(timestamp))\n\n  useEffect(() => {\n    if (!timestamp) {\n      const interval = setInterval(() => setDisplayedTime(format()), 1000)\n      return () => clearInterval(interval)\n    }\n\n    setDisplayedTime(format(timestamp))\n  }, [format, timestamp])\n\n  return <Display>{displayedTime}</Display>\n}\n"]},"metadata":{},"sourceType":"module"}