{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useObserver } from \"mobx-react-lite\";\nimport { destroy, getSnapshot } from \"mobx-state-tree\";\nimport { useRouter } from \"next/router\";\nimport React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { ModalManagerContext } from \"../common/modal/ModalManagerContext\";\nimport { Footer } from \"../common/page/Footer\";\nimport { Header } from \"../common/page/Header\";\nimport { PageHead } from \"../common/page/PageHead\";\nimport { PreferencesModal } from \"../common/settings/PreferencesModal\";\nimport { useLazyValue } from \"../common/state/useLazyValue\";\nimport { useRequiredContext } from \"../common/state/useRequiredContext\";\nimport { EditorManager } from \"../modules/editor/EditorManager\";\nimport { EditorManagerProvider } from \"../modules/editor/EditorManagerContext\";\nimport { getEditorManagerFromQuery } from \"../modules/editor/getEditorManagerFromQuery\";\nimport { Preview } from \"../modules/message/preview/Preview\";\nconst Container = styled.div.withConfig({\n  componentId: \"gxogrm-0\"\n})([\"height:100%;overflow-y:auto;display:flex;flex-flow:column;\"]);\nconst Content = styled.div.withConfig({\n  componentId: \"gxogrm-1\"\n})([\"flex:1;\"]);\nexport default function Viewer(props) {\n  const {\n    state\n  } = props;\n  const editorManager = useLazyValue(() => EditorManager.create(state));\n  useEffect(() => () => destroy(editorManager), [editorManager]);\n  const modalManager = useRequiredContext(ModalManagerContext);\n\n  const spawnSettingsModal = () => modalManager.spawn({\n    render: () => /*#__PURE__*/_jsx(PreferencesModal, {})\n  });\n\n  const router = useRouter();\n  return useObserver(() => /*#__PURE__*/_jsxs(EditorManagerProvider, {\n    value: editorManager,\n    children: [/*#__PURE__*/_jsx(PageHead, {\n      title: \"Message Viewer\",\n      description: \"Discohook's standalone message viewer.\",\n      children: /*#__PURE__*/_jsx(\"meta\", {\n        name: \"referrer\",\n        content: \"strict-origin\"\n      }, \"referrer\")\n    }), /*#__PURE__*/_jsxs(Container, {\n      children: [/*#__PURE__*/_jsx(Header, {\n        items: [{\n          name: \"Editor\",\n          to: `/?data=${encodeURIComponent(String(router.query.data))}`\n        }, {\n          name: \"Settings\",\n          handler: spawnSettingsModal\n        }]\n      }), /*#__PURE__*/_jsx(Content, {\n        children: /*#__PURE__*/_jsx(Preview, {})\n      }), /*#__PURE__*/_jsx(Footer, {})]\n    })]\n  }));\n}\nexport const getServerSideProps = context => {\n  return {\n    props: {\n      state: getSnapshot(getEditorManagerFromQuery(context.query))\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"module"}