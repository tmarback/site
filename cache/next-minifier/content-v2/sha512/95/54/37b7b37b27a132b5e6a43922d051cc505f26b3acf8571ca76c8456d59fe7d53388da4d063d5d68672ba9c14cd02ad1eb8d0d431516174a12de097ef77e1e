{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[203],{\"0XaK\":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/viewer\",function(){return n(\"7je4\")}])},\"7je4\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return m})),n.d(t,\"default\",(function(){return p}));var o=n(\"nKUr\"),r=n(\"aoTL\"),c=n(\"99Ma\"),a=n(\"20a2\"),s=n(\"q1tI\"),i=n(\"vOnD\"),d=n(\"+VeW\"),j=n(\"RD3H\"),u=n(\"63st\"),b=n(\"moWD\"),f=n(\"UMvu\"),w=n(\"uEgJ\"),l=n(\"ytgV\"),O=n(\"hqub\"),_=n(\"BtPA\"),g=n(\"BIuZ\");const x=i.d.div.withConfig({componentId:\"gxogrm-0\"})([\"height:100%;overflow-y:auto;display:flex;flex-flow:column;\"]),h=i.d.div.withConfig({componentId:\"gxogrm-1\"})([\"flex:1;\"]);var m=!0;function p(e){const{state:t}=e,n=Object(w.a)((()=>O.a.create(t)));Object(s.useEffect)((()=>()=>Object(c.destroy)(n)),[n]);const i=Object(l.a)(d.a),m=()=>i.spawn({render:()=>Object(o.jsx)(f.a,{})}),p=Object(a.useRouter)();return Object(r.b)((()=>Object(o.jsxs)(_.b,{value:n,children:[Object(o.jsx)(b.a,{title:\"Message Viewer\",description:\"Discohook's standalone message viewer.\",children:Object(o.jsx)(\"meta\",{name:\"referrer\",content:\"strict-origin\"},\"referrer\")}),Object(o.jsxs)(x,{children:[Object(o.jsx)(u.a,{items:[{name:\"Editor\",to:`/?data=${encodeURIComponent(String(p.query.data))}`},{name:\"Settings\",handler:m}]}),Object(o.jsx)(h,{children:Object(o.jsx)(g.a,{})}),Object(o.jsx)(j.a,{})]})]})))}}},[[\"0XaK\",0,2,3,6,1,4,5]]]);","map":{"version":3,"sources":["static/chunks/pages/viewer-b13b410bb57755725f40.js"],"names":["_N_E","window","push","0XaK","module","exports","__webpack_require__","__NEXT_P","7je4","__webpack_exports__","r","d","__N_SSP","Viewer","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__","mobx_state_tree__WEBPACK_IMPORTED_MODULE_2__","next_router__WEBPACK_IMPORTED_MODULE_3__","react__WEBPACK_IMPORTED_MODULE_4__","styled_components__WEBPACK_IMPORTED_MODULE_5__","_common_modal_ModalManagerContext__WEBPACK_IMPORTED_MODULE_6__","_common_page_Footer__WEBPACK_IMPORTED_MODULE_7__","_common_page_Header__WEBPACK_IMPORTED_MODULE_8__","_common_page_PageHead__WEBPACK_IMPORTED_MODULE_9__","_common_settings_PreferencesModal__WEBPACK_IMPORTED_MODULE_10__","_common_state_useLazyValue__WEBPACK_IMPORTED_MODULE_11__","_common_state_useRequiredContext__WEBPACK_IMPORTED_MODULE_12__","_modules_editor_EditorManager__WEBPACK_IMPORTED_MODULE_13__","_modules_editor_EditorManagerContext__WEBPACK_IMPORTED_MODULE_14__","_modules_message_preview_Preview__WEBPACK_IMPORTED_MODULE_15__","Container","div","withConfig","componentId","Content","props","state","editorManager","Object","create","modalManager","spawnSettingsModal","spawn","render","router","value","children","title","description","name","content","items","to","encodeURIComponent","String","query","data","handler"],"mappings":"AAAAA,MACCC,OAAyB,iBAAIA,OAAyB,kBAAK,IAAIC,KAAK,CAAC,CAAC,KAAK,CAEtEC,OACA,SAAUC,EAAQC,EAASC,IAG1BL,OAAOM,SAAWN,OAAOM,UAAY,IAAIL,KAAK,CAC7C,UACA,WACE,OAAOI,EAAoB,YAO/BE,OACA,SAAUJ,EAAQK,EAAqBH,GAE7C,aACAA,EAAoBI,EAAED,GACSH,EAAoBK,EAAEF,EAAqB,WAAW,WAAa,OAAOG,KAC1EN,EAAoBK,EAAEF,EAAqB,WAAW,WAAa,OAAOI,KACpF,IAAIC,EAAiDR,EAAoB,QAErES,EAA+CT,EAAoB,QACnEU,EAA+CV,EAAoB,QACnEW,EAA2CX,EAAoB,QAE/DY,EAAqCZ,EAAoB,QAEzDa,EAAiDb,EAAoB,QACrEc,EAAiEd,EAAoB,QACrFe,EAAmDf,EAAoB,QACvEgB,EAAmDhB,EAAoB,QACvEiB,EAAqDjB,EAAoB,QACzEkB,EAAkElB,EAAoB,QACtFmB,EAA2DnB,EAAoB,QAC/EoB,EAAiEpB,EAAoB,QACrFqB,EAA8DrB,EAAoB,QAClFsB,EAAqEtB,EAAoB,QACzFuB,EAAiEvB,EAAoB,QAkB9G,MAAMwB,EAAYX,EAAgE,EAAEY,IAAIC,WAAW,CACjGC,YAAa,YADGd,CAEf,CAAC,+DACEe,EAAUf,EAAgE,EAAEY,IAAIC,WAAW,CAC/FC,YAAa,YADCd,CAEb,CAAC,YACJ,IAAIP,GAAU,EACd,SAASC,EAAOsB,GACd,MAAMC,MACJA,GACED,EACEE,EAAgBC,OAAOb,EAA+E,EAAtFa,EAAyF,IAAMX,EAAmF,EAAEY,OAAOH,KACjNE,OAAOpB,EAA8C,UAArDoB,EAAwD,IAAM,IAAMA,OAAOtB,EAAsD,QAA7DsB,CAAgED,IAAgB,CAACA,IACrJ,MAAMG,EAAeF,OAAOZ,EAA2F,EAAlGY,CAAqGlB,EAA4F,GAEhNqB,EAAqB,IAAMD,EAAaE,MAAM,CAClDC,OAAQ,IAAmBL,OAAOxB,EAAoD,IAA3DwB,CAA8Dd,EAA0F,EAAG,MAGlLoB,EAASN,OAAOrB,EAAoD,UAA3DqB,GACf,OAAOA,OAAOvB,EAAkE,EAAzEuB,EAA4E,IAAmBA,OAAOxB,EAAqD,KAA5DwB,CAA+DV,EAAkG,EAAG,CACxQiB,MAAOR,EACPS,SAAU,CAAcR,OAAOxB,EAAoD,IAA3DwB,CAA8Df,EAAqE,EAAG,CAC5JwB,MAAO,iBACPC,YAAa,yCACbF,SAAuBR,OAAOxB,EAAoD,IAA3DwB,CAA8D,OAAQ,CAC3FW,KAAM,WACNC,QAAS,iBACR,cACYZ,OAAOxB,EAAqD,KAA5DwB,CAA+DR,EAAW,CACzFgB,SAAU,CAAcR,OAAOxB,EAAoD,IAA3DwB,CAA8DhB,EAAiE,EAAG,CACxJ6B,MAAO,CAAC,CACNF,KAAM,SACNG,GAAI,UAAUC,mBAAmBC,OAAOV,EAAOW,MAAMC,UACpD,CACDP,KAAM,WACNQ,QAAShB,MAEIH,OAAOxB,EAAoD,IAA3DwB,CAA8DJ,EAAS,CACtFY,SAAuBR,OAAOxB,EAAoD,IAA3DwB,CAA8DT,EAAgF,EAAG,MACzJS,OAAOxB,EAAoD,IAA3DwB,CAA8DjB,EAAiE,EAAG,eAOvJ,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE"},"name":"static/chunks/pages/viewer-b13b410bb57755725f40.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[203],{\n\n/***/ \"0XaK\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/viewer\",\n        function () {\n          return __webpack_require__(\"7je4\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"7je4\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__N_SSP\", function() { return __N_SSP; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Viewer; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"aoTL\");\n/* harmony import */ var mobx_state_tree__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"99Ma\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"vOnD\");\n/* harmony import */ var _common_modal_ModalManagerContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"+VeW\");\n/* harmony import */ var _common_page_Footer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"RD3H\");\n/* harmony import */ var _common_page_Header__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"63st\");\n/* harmony import */ var _common_page_PageHead__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"moWD\");\n/* harmony import */ var _common_settings_PreferencesModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"UMvu\");\n/* harmony import */ var _common_state_useLazyValue__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"uEgJ\");\n/* harmony import */ var _common_state_useRequiredContext__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"ytgV\");\n/* harmony import */ var _modules_editor_EditorManager__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"hqub\");\n/* harmony import */ var _modules_editor_EditorManagerContext__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"BtPA\");\n/* harmony import */ var _modules_message_preview_Preview__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"BIuZ\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Container = styled_components__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"d\"].div.withConfig({\n  componentId: \"gxogrm-0\"\n})([\"height:100%;overflow-y:auto;display:flex;flex-flow:column;\"]);\nconst Content = styled_components__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"d\"].div.withConfig({\n  componentId: \"gxogrm-1\"\n})([\"flex:1;\"]);\nvar __N_SSP = true;\nfunction Viewer(props) {\n  const {\n    state\n  } = props;\n  const editorManager = Object(_common_state_useLazyValue__WEBPACK_IMPORTED_MODULE_11__[/* useLazyValue */ \"a\"])(() => _modules_editor_EditorManager__WEBPACK_IMPORTED_MODULE_13__[/* EditorManager */ \"a\"].create(state));\n  Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useEffect\"])(() => () => Object(mobx_state_tree__WEBPACK_IMPORTED_MODULE_2__[\"destroy\"])(editorManager), [editorManager]);\n  const modalManager = Object(_common_state_useRequiredContext__WEBPACK_IMPORTED_MODULE_12__[/* useRequiredContext */ \"a\"])(_common_modal_ModalManagerContext__WEBPACK_IMPORTED_MODULE_6__[/* ModalManagerContext */ \"a\"]);\n\n  const spawnSettingsModal = () => modalManager.spawn({\n    render: () => /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_common_settings_PreferencesModal__WEBPACK_IMPORTED_MODULE_10__[/* PreferencesModal */ \"a\"], {})\n  });\n\n  const router = Object(next_router__WEBPACK_IMPORTED_MODULE_3__[\"useRouter\"])();\n  return Object(mobx_react_lite__WEBPACK_IMPORTED_MODULE_1__[/* useObserver */ \"b\"])(() => /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(_modules_editor_EditorManagerContext__WEBPACK_IMPORTED_MODULE_14__[/* EditorManagerProvider */ \"b\"], {\n    value: editorManager,\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_common_page_PageHead__WEBPACK_IMPORTED_MODULE_9__[/* PageHead */ \"a\"], {\n      title: \"Message Viewer\",\n      description: \"Discohook's standalone message viewer.\",\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"meta\", {\n        name: \"referrer\",\n        content: \"strict-origin\"\n      }, \"referrer\")\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(Container, {\n      children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_common_page_Header__WEBPACK_IMPORTED_MODULE_8__[/* Header */ \"a\"], {\n        items: [{\n          name: \"Editor\",\n          to: `/?data=${encodeURIComponent(String(router.query.data))}`\n        }, {\n          name: \"Settings\",\n          handler: spawnSettingsModal\n        }]\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(Content, {\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_modules_message_preview_Preview__WEBPACK_IMPORTED_MODULE_15__[/* Preview */ \"a\"], {})\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_common_page_Footer__WEBPACK_IMPORTED_MODULE_7__[/* Footer */ \"a\"], {})]\n    })]\n  }));\n}\n\n/***/ })\n\n},[[\"0XaK\",0,2,3,6,1,4,5]]]);","inputSourceMap":{"version":3,"sources":["/home/runner/work/site/site/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fviewer&absolutePagePath=private-next-pages%2Fviewer.tsx!","/home/runner/work/site/site/pages/viewer.tsx"],"names":["Container","styled","div","Content","Viewer","props","state","editorManager","useLazyValue","EditorManager","create","useEffect","destroy","modalManager","useRequiredContext","ModalManagerContext","spawnSettingsModal","spawn","render","router","useRouter","useObserver","name","to","encodeURIComponent","String","query","data","handler"],"mappings":";;;;;;;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAA+B;AACxD;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,MAAMA,SAAS,GAAGC,iEAAM,CAACC,GAAV;AAAA;AAAA,kEAAf;AAOA,MAAMC,OAAO,GAAGF,iEAAM,CAACC,GAAV;AAAA;AAAA,eAAb;;AAQe,SAASE,MAAT,CAAgBC,KAAhB,EAAoC;AACjD,QAAM;AAAEC;AAAF,MAAYD,KAAlB;AAEA,QAAME,aAAa,GAAGC,wFAAY,CAAC,MAAMC,oFAAa,CAACC,MAAd,CAAqBJ,KAArB,CAAP,CAAlC;AACAK,yDAAS,CAAC,MAAM,MAAMC,+DAAO,CAACL,aAAD,CAApB,EAAqC,CAACA,aAAD,CAArC,CAAT;AAEA,QAAMM,YAAY,GAAGC,oGAAkB,CAACC,6FAAD,CAAvC;;AACA,QAAMC,kBAAkB,GAAG,MACzBH,YAAY,CAACI,KAAb,CAAmB;AAAEC,UAAM,EAAE,mBAAM,8DAAC,2FAAD;AAAhB,GAAnB,CADF;;AAGA,QAAMC,MAAM,GAAGC,6DAAS,EAAxB;AAEA,SAAOC,2EAAW,CAAC,mBACjB,+DAAC,mGAAD;AAAuB,SAAK,EAAEd,aAA9B;AAAA,4BACE,8DAAC,sEAAD;AACE,WAAK,EAAC,gBADR;AAEE,iBAAW,EAAC,wCAFd;AAAA,6BAIE;AAAqB,YAAI,EAAC,UAA1B;AAAqC,eAAO,EAAC;AAA7C,SAAU,UAAV;AAJF,MADF,eAOE,+DAAC,SAAD;AAAA,8BACE,8DAAC,kEAAD;AACE,aAAK,EAAE,CACL;AACEe,cAAI,EAAE,QADR;AAEEC,YAAE,EAAG,UAASC,kBAAkB,CAACC,MAAM,CAACN,MAAM,CAACO,KAAP,CAAaC,IAAd,CAAP,CAA4B;AAF9D,SADK,EAKL;AAAEL,cAAI,EAAE,UAAR;AAAoBM,iBAAO,EAAEZ;AAA7B,SALK;AADT,QADF,eAUE,8DAAC,OAAD;AAAA,+BACE,8DAAC,iFAAD;AADF,QAVF,eAaE,8DAAC,kEAAD,KAbF;AAAA,MAPF;AAAA,IADgB,CAAlB;AAyBD,C","file":"x","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/viewer\",\n        function () {\n          return require(\"private-next-pages/viewer.tsx\");\n        }\n      ]);\n    ","import { useObserver } from \"mobx-react-lite\"\nimport { destroy, getSnapshot, SnapshotOut } from \"mobx-state-tree\"\nimport type { GetServerSidePropsContext } from \"next\"\nimport { useRouter } from \"next/router\"\nimport React, { useEffect } from \"react\"\nimport styled from \"styled-components\"\nimport { ModalManagerContext } from \"../common/modal/ModalManagerContext\"\nimport { Footer } from \"../common/page/Footer\"\nimport { Header } from \"../common/page/Header\"\nimport { PageHead } from \"../common/page/PageHead\"\nimport { PreferencesModal } from \"../common/settings/PreferencesModal\"\nimport { useLazyValue } from \"../common/state/useLazyValue\"\nimport { useRequiredContext } from \"../common/state/useRequiredContext\"\nimport { EditorManager } from \"../modules/editor/EditorManager\"\nimport { EditorManagerProvider } from \"../modules/editor/EditorManagerContext\"\nimport { getEditorManagerFromQuery } from \"../modules/editor/getEditorManagerFromQuery\"\nimport { Preview } from \"../modules/message/preview/Preview\"\n\nconst Container = styled.div`\n  height: 100%;\n  overflow-y: auto;\n  display: flex;\n  flex-flow: column;\n`\n\nconst Content = styled.div`\n  flex: 1;\n`\n\nexport type ViewerProps = {\n  state: SnapshotOut<typeof EditorManager>\n}\n\nexport default function Viewer(props: ViewerProps) {\n  const { state } = props\n\n  const editorManager = useLazyValue(() => EditorManager.create(state))\n  useEffect(() => () => destroy(editorManager), [editorManager])\n\n  const modalManager = useRequiredContext(ModalManagerContext)\n  const spawnSettingsModal = () =>\n    modalManager.spawn({ render: () => <PreferencesModal /> })\n\n  const router = useRouter()\n\n  return useObserver(() => (\n    <EditorManagerProvider value={editorManager}>\n      <PageHead\n        title=\"Message Viewer\"\n        description=\"Discohook's standalone message viewer.\"\n      >\n        <meta key=\"referrer\" name=\"referrer\" content=\"strict-origin\" />\n      </PageHead>\n      <Container>\n        <Header\n          items={[\n            {\n              name: \"Editor\",\n              to: `/?data=${encodeURIComponent(String(router.query.data))}`,\n            },\n            { name: \"Settings\", handler: spawnSettingsModal },\n          ]}\n        />\n        <Content>\n          <Preview />\n        </Content>\n        <Footer />\n      </Container>\n    </EditorManagerProvider>\n  ))\n}\n\nexport const getServerSideProps = (\n  context: GetServerSidePropsContext,\n): { props: ViewerProps } => {\n  return {\n    props: {\n      state: getSnapshot(getEditorManagerFromQuery(context.query)),\n    },\n  }\n}\n"]}}