{"code":"(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[208],{PnKv:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"DataEditorModal\",(function(){return H}));var o=n(\"cpVT\"),l=n(\"nKUr\"),r=n(\"aoTL\"),i=n(\"99Ma\"),a=n(\"q1tI\"),c=n(\"vOnD\"),s=n(\"OxXK\"),u=n(\"GyG+\"),d=n(\"JrLk\"),p=n(\"Oj8e\"),b=n(\"KpTw\"),m=n(\"LZrb\"),f=n(\"YmNt\"),v=n(\"g+2O\"),h=n(\"nGg0\"),g=n(\"mNbY\"),O=n(\"xnAi\");var j=n(\"ytgV\"),y=n(\"eoCo\"),x=n(\"QcNg\"),w=n(\"vf0R\");const $=(...e)=>(t,n)=>e.reduce(((e,o)=>e.some((e=>\"string\"===typeof e))?e:o(t,n)),[]),M=(e,t)=>Array.isArray(e)?[]:[`${t}: Must be array`],C=e=>$(M,((t,n)=>t.flatMap(((t,o)=>e(t,`${n}[${o}]`))))),N=(e,t)=>\"number\"===typeof e?[]:[`${t}: Must be number`],k=(e,t)=>\"object\"!==typeof e||null===e||Array.isArray(e)||e instanceof Date?[`${t}: Must be object`]:[],_=e=>$(k,((t,n)=>Object.entries(e).flatMap((([e,o])=>Object.prototype.hasOwnProperty.call(t,e)?o(t[e],`${n}.${e}`):[])))),S=(e,t)=>\"string\"===typeof e?[]:[`${t}: Must be string`],P=$(S,((e,t)=>/^https?:\\/\\//.test(e)?[]:[`${t}: Must be URL`])),A=(e,t)=>{return $((n=e,(e,t)=>\"string\"===typeof e&&e.trim().length<n?[`${t}: Must be at least ${n} character long`]:Array.isArray(e)&&e.length<n?[`${t}: Must contain at least ${n} value`]:[]),(e=>(t,n)=>\"string\"===typeof t&&t.trim().length>e?[`${n}: Must be at most ${e} long`]:Array.isArray(t)&&t.length>e?[`${n}: Must contain at most ${e} values`]:[])(t));var n},E=(...e)=>$(k,((t,n)=>Object.keys(t).filter((t=>!e.includes(t))).map((e=>`${n}: Excessive key ${JSON.stringify(e)}`)))),J=e=>(t,n)=>void 0===t?[]:e(t,n),I=(...e)=>$(k,((t,n)=>e.map((e=>Object.prototype.hasOwnProperty.call(t,e))).some((e=>e))?[]:1===e.length?[`${n}: Expected key ${JSON.stringify(e[0])}`]:[`${n}: Expected one of following keys: ${e.map((e=>JSON.stringify(e))).join(\", \")}`])),D=$(E(\"name\",\"url\",\"icon_url\"),I(\"name\"),_({name:$(S,A(1,256)),url:J(P),icon_url:J(P)})),K=$(S,((e,t)=>/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}?Z$/.test(e)?[]:[`${t}: Must be date in ISO 8601 format`])),L=$(E(\"name\",\"value\",\"inline\"),((...e)=>$(k,((...e)=>(t,n)=>e.flatMap((e=>e(t,n))))(...e.map((e=>I(e))))))(\"name\",\"value\"),_({name:$(S,A(1,256)),value:$(S,A(1,1024)),inline:J(((e,t)=>\"boolean\"===typeof e?[]:[`${t}: Must be boolean`]))})),T=$(I(\"text\"),E(\"text\",\"icon_url\"),_({text:$(S,A(1,2048)),icon_url:J(P)})),z=e=>(t,n)=>null===t?[]:e(t,n),G=$(E(\"title\",\"description\",\"url\",\"timestamp\",\"color\",\"footer\",\"image\",\"thumbnail\",\"author\",\"fields\"),I(\"title\",\"description\",\"url\",\"timestamp\",\"color\",\"footer\",\"image\",\"thumbnail\",\"author\",\"fields\"),_({title:J($(S,A(1,256))),description:J($(S,A(1,4096))),url:J(P),timestamp:J(K),color:J(z((R=0,U=16777215,$(N,((e,t)=>R>e||U<e?[`${t}: Must be between ${R} and ${U} inclusive`]:[]))))),footer:J(T),image:J($(E(\"url\"),I(\"url\"),_({url:P}))),thumbnail:J($(E(\"url\"),I(\"url\"),_({url:P}))),author:J(D),fields:J($(C(L),A(1,25)))}));var R,U;const Q=$(E(\"content\",\"embeds\",\"username\",\"avatar_url\"),I(\"content\",\"embeds\"),_({content:J(z($(S,A(1,2e3)))),embeds:J(z($(C(G),A(1,10)))),username:J($(S,A(1,256))),avatar_url:J(P)}));function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Z=Object(c.d)(f.a).withConfig({componentId:\"cbip1o-0\"})([\"width:1024px;height:768px;display:flex;flex-flow:column;\"]),q=Object(c.d)(m.a).withConfig({componentId:\"cbip1o-1\"})([\"flex:1;display:flex;flex-flow:column;\"]),B=Object(c.d)(p.a).withConfig({componentId:\"cbip1o-2\"})([\"&&{width:100%;resize:none;}flex:1;font-family:\",\";font-size:14px;line-height:1.375;overflow-y:auto;\"],(({theme:e})=>e.font.mono)),X=c.d.div.withConfig({componentId:\"cbip1o-3\"})([\"margin-top:8px;max-height:max(20%,96px);overflow-y:auto;\"]),F=c.d.code.withConfig({componentId:\"cbip1o-4\"})([\"display:block;color:\",\";font-size:14px;line-height:1.375;& + &{margin-top:8px;}\"],(({theme:e})=>e.accent.danger));function H(e){const{message:t}=e,n=Object(j.a)(O.a),{0:o,1:c}=Object(a.useState)((()=>Object(w.a)(t.data))),{value:p,error:m}=(e=>{try{return{value:JSON.parse(e)}}catch(m){return{error:m.message.replace(/^JSON\\.parse: /,\"\")}}})(o),f=m?[m]:Q(p,\"$\");return Object(r.b)((()=>Object(l.jsxs)(Z,{children:[Object(l.jsxs)(h.a,{children:[Object(l.jsx)(g.a,{children:\"JSON Editor\"}),Object(l.jsx)(b.a,{icon:y.a,label:\"Close\",onClick:()=>n.dismiss()})]}),Object(l.jsxs)(q,{children:[Object(l.jsx)(B,{as:\"textarea\",id:\"data-editor\",value:o,onChange:e=>{c(e.target.value)}}),f.length>0&&Object(l.jsx)(X,{children:f.map(((e,t)=>Object(l.jsx)(F,{children:e},t)))})]}),Object(l.jsxs)(v.a,{children:[Object(l.jsx)(d.a,{onClick:()=>Object(s.a)(o),children:\"Copy to Clipboard\"}),Object(l.jsx)(d.a,{onClick:()=>n.dismiss(),children:\"Cancel\"}),Object(l.jsx)(u.a,{disabled:f.length>0,onClick:()=>{Object(i.applySnapshot)(t,Y(Y({},Object(x.a)(JSON.parse(o))),{},{id:t.id})),n.dismiss()},children:\"Apply Changes\"})]})]})))}},QcNg:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return l}));var o=n(\"E/M9\");const l=e=>{var t,n,l;const r={};r.content=null!==(t=e.content)&&void 0!==t?t:\"\",r.username=null!==(n=e.username)&&void 0!==n?n:\"\",r.avatar=null!==(l=e.avatar_url)&&void 0!==l?l:\"\";const i=[];r.embeds=i;for(const E of null!==(a=e.embeds)&&void 0!==a?a:[]){var a,c,s,u,d,p,b,m,f,v,h,g,O,j,y,x,w,$,M,C,N;let e=i.length>0?i[i.length-1]:void 0;if(null!==(c=e)&&void 0!==c&&c.url&&e.url===E.url){var k;const t=e.gallery;null!==(k=E.image)&&void 0!==k&&k.url&&t.length<4&&t.push(E.image.url);continue}e={},i.push(e),e.title=null!==(s=E.title)&&void 0!==s?s:\"\",e.description=null!==(u=E.description)&&void 0!==u?u:\"\",e.url=null!==(d=E.url)&&void 0!==d?d:\"\",e.author=null!==(p=null===(b=E.author)||void 0===b?void 0:b.name)&&void 0!==p?p:\"\",e.authorUrl=null!==(m=null===(f=E.author)||void 0===f?void 0:f.url)&&void 0!==m?m:\"\",e.authorIcon=null!==(v=null===(h=E.author)||void 0===h?void 0:h.icon_url)&&void 0!==v?v:\"\",e.footer=null!==(g=null===(O=E.footer)||void 0===O?void 0:O.text)&&void 0!==g?g:\"\",e.footerIcon=null!==(j=null===(y=E.footer)||void 0===y?void 0:y.icon_url)&&void 0!==j?j:\"\",e.timestamp=new Date(null!==(x=E.timestamp)&&void 0!==x?x:Number.NaN),e.gallery=[null!==(w=null===($=E.image)||void 0===$?void 0:$.url)&&void 0!==w?w:\"\"].filter(Boolean),e.thumbnail=null!==(M=null===(C=E.thumbnail)||void 0===C?void 0:C.url)&&void 0!==M?M:\"\";const t=o.a.create();t.setRaw(null!==(N=E.color)&&void 0!==N?N:null),e.color=t;const n=[];e.fields=n;for(const o of null!==(_=E.fields)&&void 0!==_?_:[]){var _,S,P,A;const e={};n.push(e),e.name=null!==(S=o.name)&&void 0!==S?S:\"\",e.value=null!==(P=o.value)&&void 0!==P?P:\"\",e.inline=null!==(A=o.inline)&&void 0!==A&&A}}return r}}}]);","map":{"version":3,"sources":["static/chunks/208.39283dfd87b4fdcf5217.js"],"names":["window","push","PnKv","module","__webpack_exports__","__webpack_require__","r","d","DataEditorModal","defineProperty","jsx_runtime","es","mobx_state_tree_module","react","styled_components_browser_esm","copyTextToClipboard","PrimaryButton","SecondaryButton","Input","ModalAction","ModalBody","ModalContainer","ModalFooter","ModalHeader","ModalTitle","ModalContext","useRequiredContext","remove","messageOf","stringifyMessage","first","validators","value","key","reduce","results","validate","some","result","isArray","Array","contains","flatMap","item","index","isNumber","isObject","Date","isShape","shape","Object","entries","shapeKey","prototype","hasOwnProperty","call","isString","isUrl","test","length_length","min","max","length","trim","maxLength","noExcessiveKeys","keys","filter","includes","map","excessiveKey","JSON","stringify","optional","undefined","requiresKey","requiredKey","join","isAuthor","name","url","icon_url","isDate","isField","all_all","requiresKeys","inline","isFooter","text","nullable","isEmbed","title","description","timestamp","color","footer","image","thumbnail","author","fields","isMessage","content","embeds","username","avatar_url","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","Container","withConfig","componentId","Body","CodeInput","theme","font","mono","ErrorContainer","div","ErrorLine","code","accent","danger","props","message","modal","0","1","setValue","data","error","json","parse","replace","parseJson","errors","children","icon","label","onClick","dismiss","as","id","onChange","event","disabled","QcNg","_common_input_color_ColorModel__WEBPACK_IMPORTED_MODULE_0__","_data$content","_data$username","_data$avatar_url","snapshot","avatar","embedData","_data$embeds","_embed","_embedData$title","_embedData$descriptio","_embedData$url","_embedData$author$nam","_embedData$author","_embedData$author$url","_embedData$author2","_embedData$author$ico","_embedData$author3","_embedData$footer$tex","_embedData$footer","_embedData$footer$ico","_embedData$footer2","_embedData$timestamp","_embedData$image$url","_embedData$image2","_embedData$thumbnail$","_embedData$thumbnail","_embedData$color","embed","_embedData$image","gallery","authorUrl","authorIcon","footerIcon","Number","NaN","Boolean","create","setRaw","fieldData","_embedData$fields","_fieldData$name","_fieldData$value","_fieldData$inline","field"],"mappings":"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"},"name":"static/chunks/208.39283dfd87b4fdcf5217.js","input":"(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[208],{\n\n/***/ \"PnKv\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"DataEditorModal\", function() { return /* binding */ DataEditorModal; });\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"cpVT\");\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./node_modules/mobx-react-lite/es/index.js + 12 modules\nvar es = __webpack_require__(\"aoTL\");\n\n// EXTERNAL MODULE: ./node_modules/mobx-state-tree/dist/mobx-state-tree.module.js\nvar mobx_state_tree_module = __webpack_require__(\"99Ma\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\n\n// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(\"vOnD\");\n\n// EXTERNAL MODULE: ./common/dom/copyTextToClipboard.ts\nvar copyTextToClipboard = __webpack_require__(\"OxXK\");\n\n// EXTERNAL MODULE: ./common/input/button/PrimaryButton.ts\nvar PrimaryButton = __webpack_require__(\"GyG+\");\n\n// EXTERNAL MODULE: ./common/input/button/SecondaryButton.ts\nvar SecondaryButton = __webpack_require__(\"JrLk\");\n\n// EXTERNAL MODULE: ./common/input/layout/Input.ts\nvar Input = __webpack_require__(\"Oj8e\");\n\n// EXTERNAL MODULE: ./common/modal/layout/ModalAction.ts\nvar ModalAction = __webpack_require__(\"KpTw\");\n\n// EXTERNAL MODULE: ./common/modal/layout/ModalBody.ts\nvar ModalBody = __webpack_require__(\"LZrb\");\n\n// EXTERNAL MODULE: ./common/modal/layout/ModalContainer.ts\nvar ModalContainer = __webpack_require__(\"YmNt\");\n\n// EXTERNAL MODULE: ./common/modal/layout/ModalFooter.ts\nvar ModalFooter = __webpack_require__(\"g+2O\");\n\n// EXTERNAL MODULE: ./common/modal/layout/ModalHeader.ts\nvar ModalHeader = __webpack_require__(\"nGg0\");\n\n// EXTERNAL MODULE: ./common/modal/layout/ModalTitle.ts\nvar ModalTitle = __webpack_require__(\"mNbY\");\n\n// EXTERNAL MODULE: ./common/modal/ModalContext.ts\nvar ModalContext = __webpack_require__(\"xnAi\");\n\n// CONCATENATED MODULE: ./common/object/parseJson.ts\nconst parseJson = json => {\n  try {\n    return {\n      value: JSON.parse(json)\n    };\n  } catch (error) {\n    const message = error.message.replace(/^JSON\\.parse: /, \"\");\n    return {\n      error: message\n    };\n  }\n};\n// EXTERNAL MODULE: ./common/state/useRequiredContext.ts\nvar useRequiredContext = __webpack_require__(\"ytgV\");\n\n// EXTERNAL MODULE: ./icons/remove.tsx\nvar remove = __webpack_require__(\"eoCo\");\n\n// EXTERNAL MODULE: ./modules/message/helpers/messageOf.ts\nvar messageOf = __webpack_require__(\"QcNg\");\n\n// EXTERNAL MODULE: ./modules/message/helpers/stringifyMessage.ts\nvar stringifyMessage = __webpack_require__(\"vf0R\");\n\n// CONCATENATED MODULE: ./modules/editor/data/validation/first.ts\nconst first = (...validators) => (value, key) => validators.reduce((results, validate) => results.some(result => typeof result === \"string\") ? results : validate(value, key), []);\n// CONCATENATED MODULE: ./modules/editor/data/validation/isArray.ts\nconst isArray = (value, key) => Array.isArray(value) ? [] : [`${key}: Must be array`];\n// CONCATENATED MODULE: ./modules/editor/data/validation/contains.ts\n\n\nconst contains = validate => first(isArray, (value, key) => value.flatMap((item, index) => validate(item, `${key}[${index}]`)));\n// CONCATENATED MODULE: ./modules/editor/data/validation/isNumber.ts\nconst isNumber = (value, key) => typeof value === \"number\" ? [] : [`${key}: Must be number`];\n// CONCATENATED MODULE: ./modules/editor/data/validation/between.ts\n\n\nconst between = (min, max) => first(isNumber, (value, key) => min > value || max < value ? [`${key}: Must be between ${min} and ${max} inclusive`] : []);\n// CONCATENATED MODULE: ./modules/editor/data/validation/isObject.ts\nconst isObject = (value, key) => typeof value === \"object\" && value !== null && !Array.isArray(value) && !(value instanceof Date) ? [] : [`${key}: Must be object`];\n// CONCATENATED MODULE: ./modules/editor/data/validation/isShape.ts\n\n\nconst isShape = shape => first(isObject, (value, key) => Object.entries(shape).flatMap(([shapeKey, validate]) => Object.prototype.hasOwnProperty.call(value, shapeKey) ? validate(value[shapeKey], `${key}.${shapeKey}`) : []));\n// CONCATENATED MODULE: ./modules/editor/data/validation/isString.ts\nconst isString = (value, key) => typeof value === \"string\" ? [] : [`${key}: Must be string`];\n// CONCATENATED MODULE: ./modules/editor/data/validation/isUrl.ts\n\n\nconst isUrl = first(isString, (value, key) => /^https?:\\/\\//.test(value) ? [] : [`${key}: Must be URL`]);\n// CONCATENATED MODULE: ./modules/editor/data/validation/maxLength.ts\nconst maxLength = length => (value, key) => typeof value === \"string\" && value.trim().length > length ? [`${key}: Must be at most ${length} long`] : Array.isArray(value) && value.length > length ? [`${key}: Must contain at most ${length} values`] : [];\n// CONCATENATED MODULE: ./modules/editor/data/validation/minLength.ts\nconst minLength = length => (value, key) => typeof value === \"string\" && value.trim().length < length ? [`${key}: Must be at least ${length} character long`] : Array.isArray(value) && value.length < length ? [`${key}: Must contain at least ${length} value`] : [];\n// CONCATENATED MODULE: ./modules/editor/data/validation/length.ts\n\n\n\nconst length_length = (min, max) => first(minLength(min), maxLength(max));\n// CONCATENATED MODULE: ./modules/editor/data/validation/noExcessiveKeys.ts\n\n\nconst noExcessiveKeys = (...keys) => first(isObject, (value, key) => Object.keys(value).filter(key => !keys.includes(key)).map(excessiveKey => `${key}: Excessive key ${JSON.stringify(excessiveKey)}`));\n// CONCATENATED MODULE: ./modules/editor/data/validation/optional.ts\nconst optional = validate => (value, key) => value === undefined ? [] : validate(value, key);\n// CONCATENATED MODULE: ./modules/editor/data/validation/requiresKey.ts\n\n\nconst requiresKey = (...keys) => first(isObject, (value, key) => keys.map(requiredKey => Object.prototype.hasOwnProperty.call(value, requiredKey)).some(result => result) ? [] : keys.length === 1 ? [`${key}: Expected key ${JSON.stringify(keys[0])}`] : [`${key}: Expected one of following keys: ${keys.map(key => JSON.stringify(key)).join(\", \")}`]);\n// CONCATENATED MODULE: ./modules/editor/data/validation/isAuthor.ts\n\n\n\n\n\n\n\n\nconst isAuthor = first(noExcessiveKeys(\"name\", \"url\", \"icon_url\"), requiresKey(\"name\"), isShape({\n  name: first(isString, length_length(1, 256)),\n  url: optional(isUrl),\n  icon_url: optional(isUrl)\n}));\n// CONCATENATED MODULE: ./modules/editor/data/validation/isDate.ts\n\n\nconst isDate = first(isString, (value, key) => /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}?Z$/.test(value) ? [] : [`${key}: Must be date in ISO 8601 format`]);\n// CONCATENATED MODULE: ./modules/editor/data/validation/isBoolean.ts\nconst isBoolean = (value, key) => typeof value === \"boolean\" ? [] : [`${key}: Must be boolean`];\n// CONCATENATED MODULE: ./modules/editor/data/validation/all.ts\nconst all_all = (...validators) => (value, key) => validators.flatMap(validate => validate(value, key));\n// CONCATENATED MODULE: ./modules/editor/data/validation/requiresKeys.ts\n\n\n\n\nconst requiresKeys = (...keys) => first(isObject, all_all(...keys.map(key => requiresKey(key))));\n// CONCATENATED MODULE: ./modules/editor/data/validation/isField.ts\n\n\n\n\n\n\n\n\nconst isField = first(noExcessiveKeys(\"name\", \"value\", \"inline\"), requiresKeys(\"name\", \"value\"), isShape({\n  name: first(isString, length_length(1, 256)),\n  value: first(isString, length_length(1, 1024)),\n  inline: optional(isBoolean)\n}));\n// CONCATENATED MODULE: ./modules/editor/data/validation/isFooter.ts\n\n\n\n\n\n\n\n\nconst isFooter = first(requiresKey(\"text\"), noExcessiveKeys(\"text\", \"icon_url\"), isShape({\n  text: first(isString, length_length(1, 2048)),\n  icon_url: optional(isUrl)\n}));\n// CONCATENATED MODULE: ./modules/editor/data/validation/nullable.ts\nconst nullable = validate => (value, key) => value === null ? [] : validate(value, key);\n// CONCATENATED MODULE: ./modules/editor/data/validation/isEmbed.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst isEmbed = first(noExcessiveKeys(\"title\", \"description\", \"url\", \"timestamp\", \"color\", \"footer\", \"image\", \"thumbnail\", \"author\", \"fields\"), requiresKey(\"title\", \"description\", \"url\", \"timestamp\", \"color\", \"footer\", \"image\", \"thumbnail\", \"author\", \"fields\"), isShape({\n  title: optional(first(isString, length_length(1, 256))),\n  description: optional(first(isString, length_length(1, 4096))),\n  url: optional(isUrl),\n  timestamp: optional(isDate),\n  color: optional(nullable(between(0, 0xffffff))),\n  footer: optional(isFooter),\n  image: optional(first(noExcessiveKeys(\"url\"), requiresKey(\"url\"), isShape({\n    url: isUrl\n  }))),\n  thumbnail: optional(first(noExcessiveKeys(\"url\"), requiresKey(\"url\"), isShape({\n    url: isUrl\n  }))),\n  author: optional(isAuthor),\n  fields: optional(first(contains(isField), length_length(1, 25)))\n}));\n// CONCATENATED MODULE: ./modules/editor/data/validation/isMessage.ts\n\n\n\n\n\n\n\n\n\n\n\nconst isMessage = first(noExcessiveKeys(\"content\", \"embeds\", \"username\", \"avatar_url\"), requiresKey(\"content\", \"embeds\"), isShape({\n  content: optional(nullable(first(isString, length_length(1, 2000)))),\n  embeds: optional(nullable(first(contains(isEmbed), length_length(1, 10)))),\n  username: optional(first(isString, length_length(1, 256))),\n  avatar_url: optional(isUrl)\n}));\n// CONCATENATED MODULE: ./modules/editor/data/DataEditorModal.tsx\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty[\"a\" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Container = Object(styled_components_browser_esm[\"d\" /* default */])(ModalContainer[\"a\" /* ModalContainer */]).withConfig({\n  componentId: \"cbip1o-0\"\n})([\"width:1024px;height:768px;display:flex;flex-flow:column;\"]);\nconst Body = Object(styled_components_browser_esm[\"d\" /* default */])(ModalBody[\"a\" /* ModalBody */]).withConfig({\n  componentId: \"cbip1o-1\"\n})([\"flex:1;display:flex;flex-flow:column;\"]);\nconst CodeInput = Object(styled_components_browser_esm[\"d\" /* default */])(Input[\"a\" /* Input */]).withConfig({\n  componentId: \"cbip1o-2\"\n})([\"&&{width:100%;resize:none;}flex:1;font-family:\", \";font-size:14px;line-height:1.375;overflow-y:auto;\"], ({\n  theme\n}) => theme.font.mono);\nconst ErrorContainer = styled_components_browser_esm[\"d\" /* default */].div.withConfig({\n  componentId: \"cbip1o-3\"\n})([\"margin-top:8px;max-height:max(20%,96px);overflow-y:auto;\"]);\nconst ErrorLine = styled_components_browser_esm[\"d\" /* default */].code.withConfig({\n  componentId: \"cbip1o-4\"\n})([\"display:block;color:\", \";font-size:14px;line-height:1.375;& + &{margin-top:8px;}\"], ({\n  theme\n}) => theme.accent.danger);\nfunction DataEditorModal(props) {\n  const {\n    message\n  } = props;\n  const modal = Object(useRequiredContext[\"a\" /* useRequiredContext */])(ModalContext[\"a\" /* ModalContext */]);\n  const {\n    0: value,\n    1: setValue\n  } = Object(react[\"useState\"])(() => Object(stringifyMessage[\"a\" /* stringifyMessage */])(message.data));\n  const {\n    value: data,\n    error\n  } = parseJson(value);\n  const errors = error ? [error] : isMessage(data, \"$\");\n  return Object(es[\"b\" /* useObserver */])(() => /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Container, {\n    children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ModalHeader[\"a\" /* ModalHeader */], {\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModalTitle[\"a\" /* ModalTitle */], {\n        children: \"JSON Editor\"\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ModalAction[\"a\" /* ModalAction */], {\n        icon: remove[\"a\" /* remove */],\n        label: \"Close\",\n        onClick: () => modal.dismiss()\n      })]\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Body, {\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CodeInput, {\n        as: \"textarea\",\n        id: \"data-editor\",\n        value: value,\n        onChange: event => {\n          setValue(event.target.value);\n        }\n      }), errors.length > 0 && /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(ErrorContainer, {\n        children: errors.map((error, index) =>\n        /*#__PURE__*/\n        // eslint-disable-next-line react/no-array-index-key\n        Object(jsx_runtime[\"jsx\"])(ErrorLine, {\n          children: error\n        }, index))\n      })]\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(ModalFooter[\"a\" /* ModalFooter */], {\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SecondaryButton[\"a\" /* SecondaryButton */], {\n        onClick: () => Object(copyTextToClipboard[\"a\" /* copyTextToClipboard */])(value),\n        children: \"Copy to Clipboard\"\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(SecondaryButton[\"a\" /* SecondaryButton */], {\n        onClick: () => modal.dismiss(),\n        children: \"Cancel\"\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PrimaryButton[\"a\" /* PrimaryButton */], {\n        disabled: errors.length > 0,\n        onClick: () => {\n          Object(mobx_state_tree_module[\"applySnapshot\"])(message, _objectSpread(_objectSpread({}, Object(messageOf[\"a\" /* messageOf */])(JSON.parse(value))), {}, {\n            id: message.id\n          }));\n          modal.dismiss();\n        },\n        children: \"Apply Changes\"\n      })]\n    })]\n  }));\n}\n\n/***/ }),\n\n/***/ \"QcNg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return messageOf; });\n/* harmony import */ var _common_input_color_ColorModel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"E/M9\");\n\nconst messageOf = data => {\n  var _data$content, _data$username, _data$avatar_url;\n\n  const snapshot = {};\n  snapshot.content = (_data$content = data.content) !== null && _data$content !== void 0 ? _data$content : \"\";\n  snapshot.username = (_data$username = data.username) !== null && _data$username !== void 0 ? _data$username : \"\";\n  snapshot.avatar = (_data$avatar_url = data.avatar_url) !== null && _data$avatar_url !== void 0 ? _data$avatar_url : \"\";\n  const embeds = [];\n  snapshot.embeds = embeds;\n\n  for (const embedData of (_data$embeds = data.embeds) !== null && _data$embeds !== void 0 ? _data$embeds : []) {\n    var _data$embeds, _embed, _embedData$title, _embedData$descriptio, _embedData$url, _embedData$author$nam, _embedData$author, _embedData$author$url, _embedData$author2, _embedData$author$ico, _embedData$author3, _embedData$footer$tex, _embedData$footer, _embedData$footer$ico, _embedData$footer2, _embedData$timestamp, _embedData$image$url, _embedData$image2, _embedData$thumbnail$, _embedData$thumbnail, _embedData$color;\n\n    let embed = embeds.length > 0 ? embeds[embeds.length - 1] : undefined;\n\n    if ((_embed = embed) !== null && _embed !== void 0 && _embed.url && embed.url === embedData.url) {\n      var _embedData$image;\n\n      const gallery = embed.gallery;\n\n      if ((_embedData$image = embedData.image) !== null && _embedData$image !== void 0 && _embedData$image.url && gallery.length < 4) {\n        gallery.push(embedData.image.url);\n      }\n\n      continue;\n    }\n\n    embed = {};\n    embeds.push(embed);\n    embed.title = (_embedData$title = embedData.title) !== null && _embedData$title !== void 0 ? _embedData$title : \"\";\n    embed.description = (_embedData$descriptio = embedData.description) !== null && _embedData$descriptio !== void 0 ? _embedData$descriptio : \"\";\n    embed.url = (_embedData$url = embedData.url) !== null && _embedData$url !== void 0 ? _embedData$url : \"\";\n    embed.author = (_embedData$author$nam = (_embedData$author = embedData.author) === null || _embedData$author === void 0 ? void 0 : _embedData$author.name) !== null && _embedData$author$nam !== void 0 ? _embedData$author$nam : \"\";\n    embed.authorUrl = (_embedData$author$url = (_embedData$author2 = embedData.author) === null || _embedData$author2 === void 0 ? void 0 : _embedData$author2.url) !== null && _embedData$author$url !== void 0 ? _embedData$author$url : \"\";\n    embed.authorIcon = (_embedData$author$ico = (_embedData$author3 = embedData.author) === null || _embedData$author3 === void 0 ? void 0 : _embedData$author3.icon_url) !== null && _embedData$author$ico !== void 0 ? _embedData$author$ico : \"\";\n    embed.footer = (_embedData$footer$tex = (_embedData$footer = embedData.footer) === null || _embedData$footer === void 0 ? void 0 : _embedData$footer.text) !== null && _embedData$footer$tex !== void 0 ? _embedData$footer$tex : \"\";\n    embed.footerIcon = (_embedData$footer$ico = (_embedData$footer2 = embedData.footer) === null || _embedData$footer2 === void 0 ? void 0 : _embedData$footer2.icon_url) !== null && _embedData$footer$ico !== void 0 ? _embedData$footer$ico : \"\";\n    embed.timestamp = new Date((_embedData$timestamp = embedData.timestamp) !== null && _embedData$timestamp !== void 0 ? _embedData$timestamp : Number.NaN);\n    embed.gallery = [(_embedData$image$url = (_embedData$image2 = embedData.image) === null || _embedData$image2 === void 0 ? void 0 : _embedData$image2.url) !== null && _embedData$image$url !== void 0 ? _embedData$image$url : \"\"].filter(Boolean);\n    embed.thumbnail = (_embedData$thumbnail$ = (_embedData$thumbnail = embedData.thumbnail) === null || _embedData$thumbnail === void 0 ? void 0 : _embedData$thumbnail.url) !== null && _embedData$thumbnail$ !== void 0 ? _embedData$thumbnail$ : \"\";\n    const color = _common_input_color_ColorModel__WEBPACK_IMPORTED_MODULE_0__[/* ColorModel */ \"a\"].create();\n    color.setRaw((_embedData$color = embedData.color) !== null && _embedData$color !== void 0 ? _embedData$color : null);\n    embed.color = color;\n    const fields = [];\n    embed.fields = fields;\n\n    for (const fieldData of (_embedData$fields = embedData.fields) !== null && _embedData$fields !== void 0 ? _embedData$fields : []) {\n      var _embedData$fields, _fieldData$name, _fieldData$value, _fieldData$inline;\n\n      const field = {};\n      fields.push(field);\n      field.name = (_fieldData$name = fieldData.name) !== null && _fieldData$name !== void 0 ? _fieldData$name : \"\";\n      field.value = (_fieldData$value = fieldData.value) !== null && _fieldData$value !== void 0 ? _fieldData$value : \"\";\n      field.inline = (_fieldData$inline = fieldData.inline) !== null && _fieldData$inline !== void 0 ? _fieldData$inline : false;\n    }\n  }\n\n  return snapshot;\n};\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/home/runner/work/site/site/common/object/parseJson.ts","/home/runner/work/site/site/modules/editor/data/validation/first.ts","/home/runner/work/site/site/modules/editor/data/validation/isArray.ts","/home/runner/work/site/site/modules/editor/data/validation/contains.ts","/home/runner/work/site/site/modules/editor/data/validation/isNumber.ts","/home/runner/work/site/site/modules/editor/data/validation/between.ts","/home/runner/work/site/site/modules/editor/data/validation/isObject.ts","/home/runner/work/site/site/modules/editor/data/validation/isShape.ts","/home/runner/work/site/site/modules/editor/data/validation/isString.ts","/home/runner/work/site/site/modules/editor/data/validation/isUrl.ts","/home/runner/work/site/site/modules/editor/data/validation/maxLength.ts","/home/runner/work/site/site/modules/editor/data/validation/minLength.ts","/home/runner/work/site/site/modules/editor/data/validation/length.ts","/home/runner/work/site/site/modules/editor/data/validation/noExcessiveKeys.ts","/home/runner/work/site/site/modules/editor/data/validation/optional.ts","/home/runner/work/site/site/modules/editor/data/validation/requiresKey.ts","/home/runner/work/site/site/modules/editor/data/validation/isAuthor.ts","/home/runner/work/site/site/modules/editor/data/validation/isDate.ts","/home/runner/work/site/site/modules/editor/data/validation/isBoolean.ts","/home/runner/work/site/site/modules/editor/data/validation/all.ts","/home/runner/work/site/site/modules/editor/data/validation/requiresKeys.ts","/home/runner/work/site/site/modules/editor/data/validation/isField.ts","/home/runner/work/site/site/modules/editor/data/validation/isFooter.ts","/home/runner/work/site/site/modules/editor/data/validation/nullable.ts","/home/runner/work/site/site/modules/editor/data/validation/isEmbed.ts","/home/runner/work/site/site/modules/editor/data/validation/isMessage.ts","/home/runner/work/site/site/modules/editor/data/DataEditorModal.tsx","/home/runner/work/site/site/modules/message/helpers/messageOf.ts"],"names":["parseJson","json","value","JSON","parse","error","message","replace","first","validators","key","reduce","results","validate","some","result","isArray","Array","contains","flatMap","item","index","isNumber","between","min","max","isObject","Date","isShape","shape","Object","entries","shapeKey","prototype","hasOwnProperty","call","isString","isUrl","test","maxLength","length","trim","minLength","noExcessiveKeys","keys","filter","includes","map","excessiveKey","stringify","optional","undefined","requiresKey","requiredKey","join","isAuthor","name","url","icon_url","isDate","isBoolean","all","requiresKeys","isField","inline","isFooter","text","nullable","isEmbed","title","description","timestamp","color","footer","image","thumbnail","author","fields","isMessage","content","embeds","username","avatar_url","Container","styled","ModalContainer","Body","ModalBody","CodeInput","Input","theme","font","mono","ErrorContainer","div","ErrorLine","code","accent","danger","DataEditorModal","props","modal","useRequiredContext","ModalContext","setValue","useState","stringifyMessage","data","errors","useObserver","remove","dismiss","event","target","copyTextToClipboard","applySnapshot","messageOf","id","snapshot","avatar","embedData","embed","gallery","push","authorUrl","authorIcon","footerIcon","Number","NaN","Boolean","ColorModel","create","setRaw","fieldData","field"],"mappings":"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","file":"x","sourcesContent":["import type { JsonType } from \"./JsonType\"\n\nexport const parseJson = (json: string) => {\n  try {\n    return { value: JSON.parse(json) as JsonType }\n  } catch (error) {\n    const message = error.message.replace(/^JSON\\.parse: /, \"\")\n    return { error: message as string }\n  }\n}\n","import type { Validator } from \"./Validator\"\n\nexport const first = (...validators: Validator[]): Validator => (value, key) =>\n  validators.reduce<string[]>(\n    (results, validate) =>\n      results.some(result => typeof result === \"string\")\n        ? results\n        : validate(value, key),\n    [],\n  )\n","import type { Validator } from \"./Validator\"\n\nexport const isArray: Validator = (value, key) =>\n  Array.isArray(value) ? [] : [`${key}: Must be array`]\n","import { first } from \"./first\"\nimport { isArray } from \"./isArray\"\nimport type { Validator } from \"./Validator\"\n\nexport const contains = (validate: Validator): Validator =>\n  first(isArray, (value, key) =>\n    (value as unknown[]).flatMap((item, index) =>\n      validate(item, `${key}[${index}]`),\n    ),\n  )\n","import type { Validator } from \"./Validator\"\n\nexport const isNumber: Validator = (value, key) =>\n  typeof value === \"number\" ? [] : [`${key}: Must be number`]\n","import { first } from \"./first\"\nimport { isNumber } from \"./isNumber\"\nimport type { Validator } from \"./Validator\"\n\nexport const between = (min: number, max: number): Validator =>\n  first(isNumber, (value, key) =>\n    min > (value as number) || max < (value as number)\n      ? [`${key}: Must be between ${min} and ${max} inclusive`]\n      : [],\n  )\n","import type { Validator } from \"./Validator\"\n\nexport const isObject: Validator = (value, key) =>\n  typeof value === \"object\" &&\n  value !== null &&\n  !Array.isArray(value) &&\n  !(value instanceof Date)\n    ? []\n    : [`${key}: Must be object`]\n","import { first } from \"./first\"\nimport { isObject } from \"./isObject\"\nimport type { Validator } from \"./Validator\"\n\nexport const isShape = (shape: Record<string, Validator>): Validator =>\n  first(isObject, (value, key) =>\n    Object.entries(shape).flatMap(([shapeKey, validate]) =>\n      Object.prototype.hasOwnProperty.call(value, shapeKey)\n        ? validate(\n            (value as Record<string, unknown>)[shapeKey],\n            `${key}.${shapeKey}`,\n          )\n        : [],\n    ),\n  )\n","import type { Validator } from \"./Validator\"\n\nexport const isString: Validator = (value, key) =>\n  typeof value === \"string\" ? [] : [`${key}: Must be string`]\n","import { first } from \"./first\"\nimport { isString } from \"./isString\"\nimport type { Validator } from \"./Validator\"\n\nexport const isUrl: Validator = first(isString, (value, key) =>\n  /^https?:\\/\\//.test(value as string) ? [] : [`${key}: Must be URL`],\n)\n","import type { Validator } from \"./Validator\"\n\nexport const maxLength = (length: number): Validator => (value, key) =>\n  typeof value === \"string\" && value.trim().length > length\n    ? [`${key}: Must be at most ${length} long`]\n    : Array.isArray(value) && value.length > length\n    ? [`${key}: Must contain at most ${length} values`]\n    : []\n","import type { Validator } from \"./Validator\"\n\nexport const minLength = (length: number): Validator => (value, key) =>\n  typeof value === \"string\" && value.trim().length < length\n    ? [`${key}: Must be at least ${length} character long`]\n    : Array.isArray(value) && value.length < length\n    ? [`${key}: Must contain at least ${length} value`]\n    : []\n","import { first } from \"./first\"\nimport { maxLength } from \"./maxLength\"\nimport { minLength } from \"./minLength\"\nimport type { Validator } from \"./Validator\"\n\nexport const length = (min: number, max: number): Validator =>\n  first(minLength(min), maxLength(max))\n","import { first } from \"./first\"\nimport { isObject } from \"./isObject\"\nimport type { Validator } from \"./Validator\"\n\nexport const noExcessiveKeys = (...keys: string[]): Validator =>\n  first(isObject, (value, key) =>\n    Object.keys(value as Record<string, unknown>)\n      .filter(key => !keys.includes(key))\n      .map(\n        excessiveKey => `${key}: Excessive key ${JSON.stringify(excessiveKey)}`,\n      ),\n  )\n","import type { Validator } from \"./Validator\"\n\nexport const optional = (validate: Validator): Validator => (value, key) =>\n  value === undefined ? [] : validate(value, key)\n","import { first } from \"./first\"\nimport { isObject } from \"./isObject\"\nimport type { Validator } from \"./Validator\"\n\nexport const requiresKey = (...keys: string[]): Validator =>\n  first(isObject, (value, key) =>\n    keys\n      .map(requiredKey =>\n        Object.prototype.hasOwnProperty.call(\n          value as Record<string, unknown>,\n          requiredKey,\n        ),\n      )\n      .some(result => result)\n      ? []\n      : keys.length === 1\n      ? [`${key}: Expected key ${JSON.stringify(keys[0])}`]\n      : [\n          `${key}: Expected one of following keys: ${keys\n            .map(key => JSON.stringify(key))\n            .join(\", \")}`,\n        ],\n  )\n","import { first } from \"./first\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { isUrl } from \"./isUrl\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { optional } from \"./optional\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const isAuthor: Validator = first(\n  noExcessiveKeys(\"name\", \"url\", \"icon_url\"),\n  requiresKey(\"name\"),\n  isShape({\n    name: first(isString, length(1, 256)),\n    url: optional(isUrl),\n    icon_url: optional(isUrl),\n  }),\n)\n","import { first } from \"./first\"\nimport { isString } from \"./isString\"\nimport type { Validator } from \"./Validator\"\n\nexport const isDate: Validator = first(isString, (value, key) =>\n  /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}?Z$/.test(value as string)\n    ? []\n    : [`${key}: Must be date in ISO 8601 format`],\n)\n","import type { Validator } from \"./Validator\"\n\nexport const isBoolean: Validator = (value, key) =>\n  typeof value === \"boolean\" ? [] : [`${key}: Must be boolean`]\n","import type { Validator } from \"./Validator\"\n\nexport const all = (...validators: Validator[]): Validator => (value, key) =>\n  validators.flatMap(validate => validate(value, key))\n","import { all } from \"./all\"\nimport { first } from \"./first\"\nimport { isObject } from \"./isObject\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const requiresKeys = (...keys: string[]): Validator =>\n  first(isObject, all(...keys.map(key => requiresKey(key))))\n","import { first } from \"./first\"\nimport { isBoolean } from \"./isBoolean\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { optional } from \"./optional\"\nimport { requiresKeys } from \"./requiresKeys\"\nimport type { Validator } from \"./Validator\"\n\nexport const isField: Validator = first(\n  noExcessiveKeys(\"name\", \"value\", \"inline\"),\n  requiresKeys(\"name\", \"value\"),\n  isShape({\n    name: first(isString, length(1, 256)),\n    value: first(isString, length(1, 1024)),\n    inline: optional(isBoolean),\n  }),\n)\n","import { first } from \"./first\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { isUrl } from \"./isUrl\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { optional } from \"./optional\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const isFooter: Validator = first(\n  requiresKey(\"text\"),\n  noExcessiveKeys(\"text\", \"icon_url\"),\n  isShape({\n    text: first(isString, length(1, 2048)),\n    icon_url: optional(isUrl),\n  }),\n)\n","import type { Validator } from \"./Validator\"\n\nexport const nullable = (validate: Validator): Validator => (value, key) =>\n  value === null ? [] : validate(value, key)\n","import { between } from \"./between\"\nimport { contains } from \"./contains\"\nimport { first } from \"./first\"\nimport { isAuthor } from \"./isAuthor\"\nimport { isDate } from \"./isDate\"\nimport { isField } from \"./isField\"\nimport { isFooter } from \"./isFooter\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { isUrl } from \"./isUrl\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { nullable } from \"./nullable\"\nimport { optional } from \"./optional\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const isEmbed: Validator = first(\n  noExcessiveKeys(\n    \"title\",\n    \"description\",\n    \"url\",\n    \"timestamp\",\n    \"color\",\n    \"footer\",\n    \"image\",\n    \"thumbnail\",\n    \"author\",\n    \"fields\",\n  ),\n  requiresKey(\n    \"title\",\n    \"description\",\n    \"url\",\n    \"timestamp\",\n    \"color\",\n    \"footer\",\n    \"image\",\n    \"thumbnail\",\n    \"author\",\n    \"fields\",\n  ),\n  isShape({\n    title: optional(first(isString, length(1, 256))),\n    description: optional(first(isString, length(1, 4096))),\n    url: optional(isUrl),\n    timestamp: optional(isDate),\n    color: optional(nullable(between(0, 0xffffff))),\n    footer: optional(isFooter),\n    image: optional(\n      first(\n        noExcessiveKeys(\"url\"),\n        requiresKey(\"url\"),\n        isShape({ url: isUrl }),\n      ),\n    ),\n    thumbnail: optional(\n      first(\n        noExcessiveKeys(\"url\"),\n        requiresKey(\"url\"),\n        isShape({ url: isUrl }),\n      ),\n    ),\n    author: optional(isAuthor),\n    fields: optional(first(contains(isField), length(1, 25))),\n  }),\n)\n","import { contains } from \"./contains\"\nimport { first } from \"./first\"\nimport { isEmbed } from \"./isEmbed\"\nimport { isShape } from \"./isShape\"\nimport { isString } from \"./isString\"\nimport { isUrl } from \"./isUrl\"\nimport { length } from \"./length\"\nimport { noExcessiveKeys } from \"./noExcessiveKeys\"\nimport { nullable } from \"./nullable\"\nimport { optional } from \"./optional\"\nimport { requiresKey } from \"./requiresKey\"\nimport type { Validator } from \"./Validator\"\n\nexport const isMessage: Validator = first(\n  noExcessiveKeys(\"content\", \"embeds\", \"username\", \"avatar_url\"),\n  requiresKey(\"content\", \"embeds\"),\n  isShape({\n    content: optional(nullable(first(isString, length(1, 2000)))),\n    embeds: optional(nullable(first(contains(isEmbed), length(1, 10)))),\n    username: optional(first(isString, length(1, 256))),\n    avatar_url: optional(isUrl),\n  }),\n)\n","import { useObserver } from \"mobx-react-lite\"\nimport { applySnapshot } from \"mobx-state-tree\"\nimport React, { ChangeEvent, useState } from \"react\"\nimport styled from \"styled-components\"\nimport { copyTextToClipboard } from \"../../../common/dom/copyTextToClipboard\"\nimport { PrimaryButton } from \"../../../common/input/button/PrimaryButton\"\nimport { SecondaryButton } from \"../../../common/input/button/SecondaryButton\"\nimport { Input } from \"../../../common/input/layout/Input\"\nimport { ModalAction } from \"../../../common/modal/layout/ModalAction\"\nimport { ModalBody } from \"../../../common/modal/layout/ModalBody\"\nimport { ModalContainer } from \"../../../common/modal/layout/ModalContainer\"\nimport { ModalFooter } from \"../../../common/modal/layout/ModalFooter\"\nimport { ModalHeader } from \"../../../common/modal/layout/ModalHeader\"\nimport { ModalTitle } from \"../../../common/modal/layout/ModalTitle\"\nimport { ModalContext } from \"../../../common/modal/ModalContext\"\nimport { parseJson } from \"../../../common/object/parseJson\"\nimport { useRequiredContext } from \"../../../common/state/useRequiredContext\"\nimport { remove } from \"../../../icons/remove\"\nimport { messageOf } from \"../../message/helpers/messageOf\"\nimport { stringifyMessage } from \"../../message/helpers/stringifyMessage\"\nimport type { MessageLike } from \"../../message/state/models/MessageModel\"\nimport { isMessage } from \"./validation/isMessage\"\n\nconst Container = styled(ModalContainer)`\n  width: 1024px;\n  height: 768px;\n\n  display: flex;\n  flex-flow: column;\n`\n\nconst Body = styled(ModalBody)`\n  flex: 1;\n\n  display: flex;\n  flex-flow: column;\n`\n\nconst CodeInput = styled(Input)`\n  && {\n    width: 100%;\n    resize: none;\n  }\n\n  flex: 1;\n\n  font-family: ${({ theme }) => theme.font.mono};\n  font-size: 14px;\n  line-height: 1.375;\n\n  overflow-y: auto;\n`\n\nconst ErrorContainer = styled.div`\n  margin-top: 8px;\n\n  max-height: max(20%, 96px);\n  overflow-y: auto;\n`\n\nconst ErrorLine = styled.code`\n  display: block;\n\n  color: ${({ theme }) => theme.accent.danger};\n  font-size: 14px;\n  line-height: 1.375;\n\n  & + & {\n    margin-top: 8px;\n  }\n`\n\nexport type DataEditorModalProps = {\n  message: MessageLike\n}\n\nexport function DataEditorModal(props: DataEditorModalProps) {\n  const { message } = props\n\n  const modal = useRequiredContext(ModalContext)\n\n  const [value, setValue] = useState(() => stringifyMessage(message.data))\n\n  const { value: data, error } = parseJson(value)\n  const errors = error ? [error] : isMessage(data, \"$\")\n\n  return useObserver(() => (\n    <Container>\n      <ModalHeader>\n        <ModalTitle>JSON Editor</ModalTitle>\n        <ModalAction\n          icon={remove}\n          label=\"Close\"\n          onClick={() => modal.dismiss()}\n        />\n      </ModalHeader>\n      <Body>\n        <CodeInput\n          as=\"textarea\"\n          id=\"data-editor\"\n          value={value}\n          onChange={(event: ChangeEvent<HTMLTextAreaElement>) => {\n            setValue(event.target.value)\n          }}\n        />\n        {errors.length > 0 && (\n          <ErrorContainer>\n            {errors.map((error, index) => (\n              // eslint-disable-next-line react/no-array-index-key\n              <ErrorLine key={index}>{error}</ErrorLine>\n            ))}\n          </ErrorContainer>\n        )}\n      </Body>\n      <ModalFooter>\n        <SecondaryButton onClick={() => copyTextToClipboard(value)}>\n          Copy to Clipboard\n        </SecondaryButton>\n        <SecondaryButton onClick={() => modal.dismiss()}>\n          Cancel\n        </SecondaryButton>\n        <PrimaryButton\n          disabled={errors.length > 0}\n          onClick={() => {\n            applySnapshot(message, {\n              ...messageOf(JSON.parse(value)),\n              id: message.id,\n            })\n            modal.dismiss()\n          }}\n        >\n          Apply Changes\n        </PrimaryButton>\n      </ModalFooter>\n    </Container>\n  ))\n}\n","import type { SnapshotIn } from \"mobx-state-tree\"\nimport { ColorModel } from \"../../../common/input/color/ColorModel\"\nimport type { MessageData } from \"../state/data/MessageData\"\nimport type { MessageModel } from \"../state/models/MessageModel\"\n\nexport const messageOf = (data: MessageData) => {\n  const snapshot: Record<string, unknown> = {}\n\n  snapshot.content = data.content ?? \"\"\n  snapshot.username = data.username ?? \"\"\n  snapshot.avatar = data.avatar_url ?? \"\"\n\n  const embeds: Record<string, unknown>[] = []\n  snapshot.embeds = embeds\n\n  for (const embedData of data.embeds ?? []) {\n    let embed = embeds.length > 0 ? embeds[embeds.length - 1] : undefined\n\n    if (embed?.url && embed.url === embedData.url) {\n      const gallery = embed.gallery as string[]\n      if (embedData.image?.url && gallery.length < 4) {\n        gallery.push(embedData.image.url)\n      }\n\n      continue\n    }\n\n    embed = {}\n    embeds.push(embed)\n\n    embed.title = embedData.title ?? \"\"\n    embed.description = embedData.description ?? \"\"\n    embed.url = embedData.url ?? \"\"\n    embed.author = embedData.author?.name ?? \"\"\n    embed.authorUrl = embedData.author?.url ?? \"\"\n    embed.authorIcon = embedData.author?.icon_url ?? \"\"\n    embed.footer = embedData.footer?.text ?? \"\"\n    embed.footerIcon = embedData.footer?.icon_url ?? \"\"\n    embed.timestamp = new Date(embedData.timestamp ?? Number.NaN)\n    embed.gallery = [embedData.image?.url ?? \"\"].filter(Boolean)\n    embed.thumbnail = embedData.thumbnail?.url ?? \"\"\n\n    const color = ColorModel.create()\n    color.setRaw(embedData.color ?? null)\n    embed.color = color\n\n    const fields: Record<string, unknown>[] = []\n    embed.fields = fields\n\n    for (const fieldData of embedData.fields ?? []) {\n      const field: Record<string, unknown> = {}\n      fields.push(field)\n\n      field.name = fieldData.name ?? \"\"\n      field.value = fieldData.value ?? \"\"\n      field.inline = fieldData.inline ?? false\n    }\n  }\n\n  return snapshot as SnapshotIn<typeof MessageModel>\n}\n"]}}